(this["webpackJsonpstock-manager"]=this["webpackJsonpstock-manager"]||[]).push([[0],{124:function(e,t,a){},128:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(14),o=a.n(i),r=a(26),s=(a(124),a(21)),l=a(20),d=a(73),u=a(17),b=a(58);a(138),a(126);b.a.initializeApp({apiKey:"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k",authDomain:"kistone-stock.firebaseapp.com",projectId:"kistone-stock",storageBucket:"kistone-stock.appspot.com",messagingSenderId:"602515706055",appId:"1:602515706055:web:271be76a0fdc249f6eeee2",measurementId:"G-1CFXPBLJZE"});b.a.auth.Auth.Persistence.LOCAL;var j={google:{get:new b.a.auth.GoogleAuthProvider,id:"google.com"}},h=b.a.auth(),g=b.a.firestore(),m=(a(128),a(4));var p=function(e){var t=e.type,a={google:{background:"#ffffff",color:"#757575",title:"Sign in with Google",titleShort:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"},github:{background:"#333333",title:"Sign in with GitHub",titleShort:"GitHub",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg"},facebook:{background:"#3b5998",title:"Sign in with Facebook",titleShort:"Facebook",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"}}[t],n=j[t];return Object(m.jsx)("div",{className:"signinButton",children:Object(m.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button","data-provider-id":n.id,style:{backgroundColor:a.background},"data-upgraded":",MaterialButton",onClick:function(){h.signInWithRedirect(n.get).then((function(e){})).catch((function(e){alert(e)}))},children:[Object(m.jsx)("span",{className:"firebaseui-idp-icon-wrapper",children:Object(m.jsx)("img",{className:"firebaseui-idp-icon",alt:"",src:a.icon})}),Object(m.jsx)("span",{className:"firebaseui-idp-text firebaseui-idp-text-long",style:{color:a.color},children:a.title})]})})};a(130);var O=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.history,a=e.store,c=e.setLoading;return console.log("Login START"),Object(n.useEffect)((function(){a.authenticate.isAuth&&t.push("/main")}),[t,a.authenticate.isAuth]),Object(m.jsxs)("div",{className:"login_main",children:[Object(m.jsx)("div",{className:"title",children:"Stock Manager"}),Object(m.jsx)("div",{className:"button",children:Object(m.jsx)(p,{type:"google"})}),Object(m.jsx)("div",{className:"guest_button",onClick:function(){c(!0),h.signInWithEmailAndPassword("guest@guest.com","password")},children:"Guest Login"})]})})),f=(a(131),a(83)),x=Object(f.b)({name:"ReduxStore",initialState:{authenticate:{user:void 0,isAuth:!1}},reducers:{login:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{authenticate:t.payload})},logout:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{authenticate:{user:void 0,isAuth:!1}})}}}),v=Object(f.a)({reducer:x.reducer}),y=x.actions,k=y.login,N=y.logout,S=v;a(132),a(133);function C(e){var t=e.tradingKey,a=e.item,c=e.handleItemSelect,i=Object(n.useState)({key:void 0,startX:0,dx:0}),o=Object(l.a)(i,2),r=o[0],d=o[1],u=function(e){var t=new Date(e.indate);t.setHours(9,0,0,0);var a=((new Date).getTime()-t.getTime())/864e5,n={color:"gray"},c=0;return a>=0&&a<1?(n={color:"chartreuse"},c=1):a>=-2&&a<0?(n={color:"red"},c=2):a<-2&&(n={color:"darkgreen"}),{ddayState:c,changeStyle:n,displayDate:t.getMonth()+1+"/"+t.getDate()}}(a),b=u.ddayState,j=u.changeStyle,h=u.displayDate,g=function(e){var t=e.clientX;return t||(t=e.touches[0].screenX.toFixed(0)),t},p=Object(n.useCallback)((function(e){Math.abs(g(e)-r.startX)>10||(c({target:e.currentTarget,tradingKey:t}),e.stopPropagation())}),[t,c,r]),O=Object(n.useCallback)((function(e){console.log([e.currentTarget]),d({key:e.currentTarget.firstChild.innerText,startX:g(e),dx:g(e)})}),[]),f=Object(n.useCallback)((function(e){if(e.preventDefault(),r.key){var t=g(e),a=r.startX>t?t:r.startX;d(Object(s.a)(Object(s.a)({},r),{},{dx:a}))}}),[r]),x=Object(n.useCallback)((function(e){e.currentTarget.setAttribute("style",{left:0}),d(Object(s.a)(Object(s.a)({},r),{},{key:void 0}))}),[r]),v=Object(n.useCallback)((function(e){e.currentTarget.setAttribute("style",{left:0}),d(Object(s.a)(Object(s.a)({},r),{},{key:void 0}))}),[r]);return Object(m.jsxs)("div",{className:"tableitem",children:[Object(m.jsx)("div",{className:"tr-bg",children:"\ubcf4\uad00"}),Object(m.jsxs)("div",{className:"tr",onClick:p,onTouchStart:O,onTouchMove:f,onTouchEnd:x,onMouseDown:O,onMouseMove:f,onMouseUpCapture:x,onMouseLeave:v,style:r.key===a.name?{left:"".concat(r.dx-r.startX,"px")}:{left:0},children:[Object(m.jsx)("div",{className:"item stock_name",children:a.name}),Object(m.jsx)("div",{className:"item stock_price",children:String(a.price).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(m.jsx)("div",{className:"item stock_quantity",children:a.quantity}),Object(m.jsxs)("div",{className:"item stock_indate",style:j,originaldate:new Date(a.indate),children:[Object(m.jsx)("span",{className:"main_text",children:h}),b>0&&Object(m.jsx)("span",{className:"sub_text",style:{color:"inherit"},children:1===b?"\uc785\uace0\uc644\ub8cc":"\uc785\uace0\uc608\uc815"})]})]})]})}var w=c.a.memo(C);var I=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,c=e.handleItemSelect,i=Object(n.useState)([]),o=Object(l.a)(i,2),r=o[0],s=o[1],d=t.key,u=t.data,b=u.color,j=u.display,h=a.authenticate;return Object(n.useEffect)((function(){return g.collection("user").doc(h.user).collection("trading").doc(d).collection("items").orderBy("indate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):g.collection("user").doc(h.user).collection("trading").doc(d).delete()}))}),[h,d]),Object(m.jsxs)("div",{className:"stocktable",children:[Object(m.jsx)("div",{className:"table_title",style:{color:b},children:Object(m.jsx)("strong",{children:j})}),Object(m.jsxs)("div",{className:"table",children:[Object(m.jsx)("div",{className:"thead",children:Object(m.jsxs)("div",{className:"tr",children:[Object(m.jsx)("div",{className:"stock_name",children:"\uc885\ubaa9\uba85"}),Object(m.jsx)("div",{className:"stock_price",children:"\ub2e8\uac00"}),Object(m.jsx)("div",{className:"stock_quantity",children:"\uc218\ub7c9"}),Object(m.jsx)("div",{className:"stock_indate",children:"\uc0c1\uc7a5\uc77c"})]})}),Object(m.jsx)("div",{className:"tbody",children:r.map((function(e){return Object(m.jsx)(w,{tradingKey:d,item:e,handleItemSelect:c},e.name)}))})]})]})})),A=a(97),T=a(165),E=a(168),D=a(179),M=a(177),L=a(182),_=a(181),B=a(173),R=a(174),F=a(24),P=a(176),z=[{key:"namuh",display:"\ub098\ubb34(NAMUH)",priority:0,color:"#00a383"},{key:"hankook",display:"\ud55c\uad6d\ud22c\uc790",priority:1,color:"#104e81"},{key:"mirae",display:"\ubbf8\ub798\uc5d0\uc14b",priority:2,color:"#e97f20"},{key:"kb",display:"KB\uc99d\uad8c",priority:3,color:"#f2b200"},{key:"shinhan",display:"\uc2e0\ud55c\uc54c\ud30c",priority:4,color:"#2e62da"},{key:"samsung",display:"\uc0bc\uc131\uc99d\uad8c",priority:5,color:"#14279b"},{key:"sk",display:"SK\uc99d\uad8c",priority:6,color:"#e31937"}],K=Object(T.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},selectEmpty:{marginTop:e.spacing(1),marginBottom:e.spacing(3)},formTrading:{minWidth:120},formInput:{width:"100%",marginBottom:"10px"}}}));var X=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,i=e.handleItemSelect,o=0,r="",s="",d="",u=new Date;c&&(z.forEach((function(e,t){e.key===c.tradingKey&&(o=t)})),r=c.target.children[0].textContent,s=c.target.children[1].textContent.replace(",",""),d=c.target.children[2].textContent,u=new Date(c.target.children[3].getAttribute("originaldate")));var b=K(),j=Object(n.useState)(o),h=Object(l.a)(j,2),p=h[0],O=h[1],f=Object(n.useState)(r),x=Object(l.a)(f,2),v=x[0],y=x[1],k=Object(n.useState)(s),N=Object(l.a)(k,2),S=N[0],C=N[1],w=Object(n.useState)(d),I=Object(l.a)(w,2),T=I[0],X=I[1],q=Object(n.useState)(u),G=Object(l.a)(q,2),W=G[0],H=G[1],J=a.authenticate,Q=null!==c;return Object(m.jsx)("div",{className:b.paper,children:Object(m.jsxs)("form",{children:[Object(m.jsxs)(E.a,{className:b.formTrading,children:[Object(m.jsx)(D.a,{id:"trading-select-label",children:"\uc99d\uad8c\uacc4\uc88c"}),Object(m.jsx)(M.a,{labelId:"trading-select-label",id:"trading-select",value:p,onChange:function(e){O(e.target.value)},className:b.selectEmpty,required:!0,disabled:Q,children:z.map((function(e,t){return Object(m.jsx)(L.a,{value:t,children:e.display},e.key)}))})]}),Object(m.jsxs)(E.a,{variant:"outlined",className:b.formInput,children:[Object(m.jsx)(D.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(m.jsx)(_.a,{id:"name-input",value:v,onChange:function(e){y(e.target.value)},label:"Name",required:!0,disabled:Q})]}),Object(m.jsxs)(E.a,{variant:"outlined",className:b.formInput,children:[Object(m.jsx)(D.a,{htmlFor:"price-input",children:"\ub2e8\uac00"}),Object(m.jsx)(_.a,{id:"price-input",value:S,onChange:function(e){C(e.target.value)},label:"Price",type:"number"})]}),Object(m.jsxs)(E.a,{variant:"outlined",className:b.formInput,children:[Object(m.jsx)(D.a,{htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(m.jsx)(_.a,{id:"quantity-input",value:T,onChange:function(e){X(e.target.value)},label:"Quantity",type:"number"})]}),Object(m.jsx)(F.a,{utils:A.a,children:Object(m.jsx)(P.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Month/Day/Year",value:W,onChange:function(e){H(e)},KeyboardButtonProps:{"aria-label":"change date"},PopoverProps:{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},className:b.formInput})}),Object(m.jsxs)(B.a,{children:[Object(m.jsx)(R.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(m.jsx)(R.a,{color:"primary",onClick:function(e){if(e.preventDefault(),"guest@guest.com"===J.user)return alert("please sign-in with private account"),t(!1),void i(null);var a=z[p],n=g.collection("user").doc(J.user).collection("trading");n.doc(a.key).set({display:a.display,priority:a.priority,color:a.color}),n.doc(a.key).collection("items").doc(v).set({name:v,price:S,quantity:T,indate:W.valueOf()}).then((function(){})).catch((function(e){console.error("Error adding document: ",e)})),t(!1),i(null)},type:"submit",autoFocus:!0,children:c?"\uc218\uc815":"\ucd94\uac00"})]})]})})})),q=a(175),G=a(178),W=a(92),H=a.n(W),J=a(93),Q=a.n(J),U=a(94),Z=a.n(U),Y=a(95),V=a.n(Y),$=a(74),ee=Object(T.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var te=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,n=e.selectedItem,c=e.handleItemSelect;n||t(!1);var i=null===n||void 0===n?void 0:n.target.children[0].innerText,o=ee(),r=a.authenticate;return Object(m.jsxs)("div",{className:o.paper,children:[Object(m.jsx)("h3",{id:"simple-modal-title",children:"\uc0ad\uc81c"}),Object(m.jsx)("div",{style:{marginBottom:"20px"},children:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(m.jsxs)(B.a,{children:[Object(m.jsx)(R.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(m.jsx)(R.a,{color:"primary",onClick:function(){if("guest@guest.com"===r.user)return alert("please sign-in with private account"),t(!1),void c(null);g.collection("user").doc(r.user).collection("trading").doc(n.tradingKey).collection("items").doc(i).delete().then((function(){})).catch((function(e){console.error("Error removing document: ",e)})),t(!1),c(null)},type:"submit",autoFocus:!0,children:"\uc0ad\uc81c"})]})]})})),ae=Object(T.a)((function(e){return{fab:{},fabEdit:{color:e.palette.common.white,backgroundColor:$.a[500],"&:hover":{backgroundColor:$.a[600]}}}}));var ne=Object(r.b)((function(e){return{store:e}}),(function(e){return{doLogout:function(){return e(N())}}}))((function(e){var t,a=e.history,c=e.store,i=e.doLogout,o=e.setLoading,r=c.authenticate,s=ae(),u=Object(n.useState)(!1),b=Object(l.a)(u,2),j=b[0],p=b[1],O=Object(n.useState)(!1),f=Object(l.a)(O,2),x=f[0],v=f[1],y=Object(n.useState)([]),k=Object(l.a)(y,2),N=k[0],S=k[1],C=Object(n.useState)(null),w=Object(l.a)(C,2),A=w[0],T=w[1];console.log("Main START"),Object(n.useEffect)((function(){return console.log("Main RENDERED"),r.isAuth?g.collection("user").doc(null===r||void 0===r?void 0:r.user).collection("trading").orderBy("priority","asc").onSnapshot((function(e){setTimeout((function(){o(!1)}),500),S(e.docs.map((function(e){return{key:e.id,data:e.data()}})))})):(console.log("Main goRoot!!"),void a.replace("/"))}),[r,a,o]);var E=function(){p(!0)},D=Object(n.useCallback)((function(e){null===A||void 0===A||A.target.setAttribute("class","tr"),(null===A||void 0===A?void 0:A.target)!==(null===e||void 0===e?void 0:e.target)?(null===e||void 0===e||e.target.setAttribute("class","tr selected"),T(e)):T(null)}),[A]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"header_main",children:[Object(m.jsx)(d.b,{to:"/ipolist",target:"_blank",rel:"noopener noreferrer",children:Object(m.jsxs)("div",{className:"title",children:[Object(m.jsx)("span",{className:"main-title",children:"Stock Manager"}),Object(m.jsx)("span",{className:"sub-title",children:"@"+(null===(t=r.user)||void 0===t?void 0:t.split("@")[0])})]})}),Object(m.jsxs)("div",{className:"logout",onClick:function(){h.signOut().then((function(){i(!1)}))},children:[Object(m.jsx)("span",{children:"Logout"}),Object(m.jsx)(H.a,{})]})]})}),Object(m.jsx)("div",{className:"main",onClick:function(){D(null)},children:N.map((function(e){return Object(m.jsx)(I,{trading:e,handleItemSelect:D},e.key)}))}),Object(m.jsx)("div",{className:A?"fab-area unselect fadeout":"fab-area unselect fadein",children:Object(m.jsx)(q.a,{className:s.fab,color:"primary","aria-label":"add",onClick:E,children:Object(m.jsx)(Q.a,{})})}),Object(m.jsxs)("div",{className:A?"fab-area select slidein":"fab-area select slideout",children:[Object(m.jsx)(q.a,{className:s.fabEdit,color:"secondary","aria-label":"edit",onClick:E,children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(q.a,{className:s.fab,color:"secondary","aria-label":"delete",onClick:function(){v(!0)},children:Object(m.jsx)(V.a,{})})]}),Object(m.jsx)(G.a,{open:j,onClose:function(){p(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(m.jsx)("div",{children:Object(m.jsx)(X,{setOpen:p,selectedItem:A,handleItemSelect:D})})}),Object(m.jsx)(G.a,{open:x,onClose:function(){v(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(m.jsx)("div",{children:Object(m.jsx)(te,{setOpen:v,selectedItem:A,handleItemSelect:D})})})]})})),ce=a(96),ie=a.n(ce);a(135);var oe=function(){return Object(m.jsx)("div",{className:"loading-area",children:Object(m.jsx)(ie.a,{type:"spinningBubbles",color:"gray",height:100,width:100})})};var re=Object(r.b)((function(e){return{store:e}}),(function(e){return{doLogin:function(t){return e(k({user:t,isAuth:!0}))}}}))((function(e){var t=e.store,a=e.doLogin,c=t.authenticate,i=Object(n.useState)(!0),o=Object(l.a)(i,2),r=o[0],b=o[1];return console.log("App START",r),Object(n.useEffect)((function(){return console.log("App RENDERED"),h.onAuthStateChanged((function(e){console.log("App onAuthStateChanged",e),e?a(e.email):setTimeout((function(){b(!1)}),500)}))}),[a]),Object(m.jsxs)(d.a,{children:[r&&Object(m.jsx)(oe,{}),Object(m.jsxs)(u.d,{children:[Object(m.jsx)(u.b,{exact:!0,path:"/",render:function(){return c.isAuth?Object(m.jsx)(u.a,{to:"/main"}):Object(m.jsx)(u.a,{to:"/login"})}}),Object(m.jsx)(u.b,{exact:!0,path:"/login",render:function(e){return Object(m.jsx)(O,Object(s.a)(Object(s.a)({},e),{},{setLoading:b}))}}),Object(m.jsx)(u.b,{exact:!0,path:"/main",render:function(e){return Object(m.jsx)(ne,Object(s.a)(Object(s.a)({},e),{},{setLoading:b}))}}),Object(m.jsx)(u.b,{exact:!0,path:"/ipolist",component:function(){return window.location.href="http://sereon.synology.me:38888/po/IPOlist",null}})]})]})}));o.a.render(Object(m.jsx)(r.a,{store:S,children:Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(re,{})})}),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.9e20ebf3.chunk.js.map