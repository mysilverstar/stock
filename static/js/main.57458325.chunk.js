(this["webpackJsonpstock-manager"]=this["webpackJsonpstock-manager"]||[]).push([[0],{123:function(e,t,a){},127:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},133:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(14),r=a.n(i),o=a(29),s=(a(123),a(95)),l=a(17),d=a(57);a(135),a(125);d.a.initializeApp({apiKey:"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k",authDomain:"kistone-stock.firebaseapp.com",projectId:"kistone-stock",storageBucket:"kistone-stock.appspot.com",messagingSenderId:"602515706055",appId:"1:602515706055:web:271be76a0fdc249f6eeee2",measurementId:"G-1CFXPBLJZE"});d.a.auth.Auth.Persistence.LOCAL;var u={google:{get:new d.a.auth.GoogleAuthProvider,id:"google.com"}},b=d.a.auth(),j=d.a.firestore(),h=(a(127),a(5));var m=function(e){var t=e.type,a={google:{background:"#ffffff",color:"#757575",title:"Sign in with Google",titleShort:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"},github:{background:"#333333",title:"Sign in with GitHub",titleShort:"GitHub",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg"},facebook:{background:"#3b5998",title:"Sign in with Facebook",titleShort:"Facebook",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"}}[t],n=u[t];return Object(h.jsx)("div",{className:"signinButton",children:Object(h.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button","data-provider-id":n.id,style:{backgroundColor:a.background},"data-upgraded":",MaterialButton",onClick:function(){b.signInWithRedirect(n.get).then((function(e){})).catch((function(e){alert(e)}))},children:[Object(h.jsx)("span",{className:"firebaseui-idp-icon-wrapper",children:Object(h.jsx)("img",{className:"firebaseui-idp-icon",alt:"",src:a.icon})}),Object(h.jsx)("span",{className:"firebaseui-idp-text firebaseui-idp-text-long",style:{color:a.color},children:a.title})]})})},p=a(60),g=a(82),O=Object(g.b)({name:"ReduxStore",initialState:{authenticate:{user:void 0,isAuth:!1}},reducers:{login:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{authenticate:t.payload})},logout:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{authenticate:{user:void 0,isAuth:!1}})}}}),f=Object(g.a)({reducer:O.reducer}),x=O.actions,y=x.login,v=x.logout,k=f;a(129);var N=Object(o.b)(null,(function(e){return{doLogin:function(t){return e(y({user:t,isAuth:!0}))}}}))((function(e){var t=e.history,a=e.doLogin;return Object(n.useEffect)((function(){return b.onAuthStateChanged((function(e){e&&(a(e.email),t.push("/main"))}))}),[t,a]),Object(h.jsxs)("div",{className:"login_main",children:[Object(h.jsx)("div",{className:"title",children:"Stock Manager"}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(m,{type:"google"})}),Object(h.jsx)("div",{className:"guest_button",onClick:function(){b.signInWithEmailAndPassword("guest@guest.com","password")},children:"Guest Login"})]})})),S=a(27);a(130),a(131);var w=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,c=e.handleItemSelect,i=Object(n.useState)([]),r=Object(S.a)(i,2),o=r[0],s=r[1],l=t.key,d=t.data,u=d.color,b=d.display,m=a.authenticate;return Object(n.useEffect)((function(){return j.collection("user").doc(m.user).collection("trading").doc(l).collection("items").orderBy("indate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):j.collection("user").doc(m.user).collection("trading").doc(l).delete()}))}),[m,l]),Object(h.jsxs)("div",{className:"stocktable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:u},children:Object(h.jsx)("strong",{children:b})}),Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)("th",{className:"stock_price",children:"\ub2e8\uac00"}),Object(h.jsx)("th",{className:"stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsx)("th",{className:"stock_indate",children:"\uc0c1\uc7a5\uc77c"})]})}),Object(h.jsx)("tbody",{children:o.map((function(e){var t=new Date(e.indate),a=new Date;a.setHours(9);var n=(a.getTime()-t.getTime())/864e5,i={color:"white"},r=!1;return n>=-1&&n<1?(i={color:"red"},r=!0):n<-1&&(i={color:"green"}),Object(h.jsxs)("tr",{onClick:function(e){c({target:e.currentTarget,tradingKey:l}),e.stopPropagation()},children:[Object(h.jsx)("td",{className:"item_name",children:e.name}),Object(h.jsx)("td",{className:"item_price",children:String(e.price).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("td",{className:"item_quantity",children:e.quantity}),Object(h.jsxs)("td",{className:"item_date",style:i,originaldate:t,children:[Object(h.jsx)("span",{className:"main_text",children:t.getMonth()+1+"/"+t.getDate()}),r&&Object(h.jsx)("span",{className:"sub_text",children:"\uc785\uace0\uc608\uc815"})]})]},e.name)}))})]})]})})),C=a(96),I=a(162),A=a(165),_=a(176),B=a(174),E=a(179),T=a(178),D=a(170),F=a(171),L=a(22),z=a(173),P=[{key:"namuh",display:"\ub098\ubb34(NAMUH)",priority:0,color:"#00a383"},{key:"hankook",display:"\ud55c\uad6d\ud22c\uc790",priority:1,color:"#104e81"},{key:"mirae",display:"\ubbf8\ub798\uc5d0\uc14b",priority:2,color:"#e97f20"},{key:"kb",display:"KB\uc99d\uad8c",priority:3,color:"#f2b200"},{key:"shinhan",display:"\uc2e0\ud55c\uc54c\ud30c",priority:4,color:"#2e62da"},{key:"samsung",display:"\uc0bc\uc131\uc99d\uad8c",priority:5,color:"#14279b"}],q=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},selectEmpty:{marginTop:e.spacing(1),marginBottom:e.spacing(3)},formTrading:{minWidth:120},formInput:{width:"100%",marginBottom:"10px"}}}));var M=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,i=e.handleItemSelect,r=0,o="",s="",l="",d=new Date;c&&(P.forEach((function(e,t){e.key===c.tradingKey&&(r=t)})),o=c.target.children[0].innerText,s=c.target.children[1].innerText.replace(",",""),l=c.target.children[2].innerText,d=new Date(c.target.children[3].getAttribute("originaldate")));var u=q(),b=Object(n.useState)(r),m=Object(S.a)(b,2),p=m[0],g=m[1],O=Object(n.useState)(o),f=Object(S.a)(O,2),x=f[0],y=f[1],v=Object(n.useState)(s),k=Object(S.a)(v,2),N=k[0],w=k[1],I=Object(n.useState)(l),M=Object(S.a)(I,2),G=M[0],K=M[1],W=Object(n.useState)(d),H=Object(S.a)(W,2),J=H[0],R=H[1],Q=a.authenticate;return Object(h.jsx)("div",{className:u.paper,children:Object(h.jsxs)("form",{children:[Object(h.jsxs)(A.a,{className:u.formTrading,children:[Object(h.jsx)(_.a,{id:"trading-select-label",children:"\uc99d\uad8c\uacc4\uc88c"}),Object(h.jsx)(B.a,{labelId:"trading-select-label",id:"trading-select",value:p,onChange:function(e){g(e.target.value)},className:u.selectEmpty,required:!0,children:P.map((function(e,t){return Object(h.jsx)(E.a,{value:t,children:e.display},e.key)}))})]}),Object(h.jsxs)(A.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(_.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(T.a,{id:"name-input",value:x,onChange:function(e){y(e.target.value)},label:"Name",required:!0})]}),Object(h.jsxs)(A.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(_.a,{htmlFor:"price-input",children:"\ub2e8\uac00"}),Object(h.jsx)(T.a,{id:"price-input",value:N,onChange:function(e){w(e.target.value)},label:"Price",type:"number"})]}),Object(h.jsxs)(A.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(_.a,{htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(T.a,{id:"quantity-input",value:G,onChange:function(e){K(e.target.value)},label:"Quantity",type:"number"})]}),Object(h.jsx)(L.a,{utils:C.a,children:Object(h.jsx)(z.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Month/Day/Year",value:J,onChange:function(e){R(e)},KeyboardButtonProps:{"aria-label":"change date"},PopoverProps:{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},className:u.formInput})}),Object(h.jsxs)(D.a,{children:[Object(h.jsx)(F.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(F.a,{color:"primary",onClick:function(e){if(e.preventDefault(),"guest@guest.com"===Q.user)return alert("please sign-in with private account"),t(!1),void i(null);var a=P[p],n=j.collection("user").doc(Q.user).collection("trading");n.doc(a.key).set({display:a.display,priority:a.priority,color:a.color}),n.doc(a.key).collection("items").doc(x).set({name:x,price:N,quantity:G,indate:J.valueOf()}).then((function(){})).catch((function(e){console.error("Error adding document: ",e)})),t(!1),i(null)},type:"submit",autoFocus:!0,children:c?"\uc218\uc815":"\ucd94\uac00"})]})]})})})),G=a(172),K=a(175),W=a(91),H=a.n(W),J=a(92),R=a.n(J),Q=a(93),Z=a.n(Q),U=a(94),X=a.n(U),Y=a(73),V=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var $=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,n=e.selectedItem,c=e.handleItemSelect;n||t(!1);var i=null===n||void 0===n?void 0:n.target.children[0].innerText,r=V(),o=a.authenticate;return Object(h.jsxs)("div",{className:r.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\uc0ad\uc81c"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(D.a,{children:[Object(h.jsx)(F.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(F.a,{color:"primary",onClick:function(){if("guest@guest.com"===o.user)return alert("please sign-in with private account"),t(!1),void c(null);j.collection("user").doc(o.user).collection("trading").doc(n.tradingKey).collection("items").doc(i).delete().then((function(){})).catch((function(e){console.error("Error removing document: ",e)})),t(!1),c(null)},type:"submit",autoFocus:!0,children:"\uc0ad\uc81c"})]})]})})),ee=Object(I.a)((function(e){return{fab:{},fabEdit:{color:e.palette.common.white,backgroundColor:Y.a[500],"&:hover":{backgroundColor:Y.a[600]}}}}));var te=Object(o.b)((function(e){return{store:e}}),(function(e){return{doLogout:function(){return e(v())}}}))((function(e){var t=e.history,a=e.store,c=e.doLogout,i=a.authenticate,r=ee(),o=Object(n.useState)(!1),s=Object(S.a)(o,2),l=s[0],d=s[1],u=Object(n.useState)(!1),m=Object(S.a)(u,2),p=m[0],g=m[1],O=Object(n.useState)([]),f=Object(S.a)(O,2),x=f[0],y=f[1],v=Object(n.useState)(null),k=Object(S.a)(v,2),N=k[0],C=k[1];i.isAuth||t.replace("/"),Object(n.useEffect)((function(){return j.collection("user").doc(null===i||void 0===i?void 0:i.user).collection("trading").orderBy("priority","asc").onSnapshot((function(e){y(e.docs.map((function(e){return{key:e.id,data:e.data()}})))}))}),[i]);var I=function(){d(!0)},A=function(e){null===N||void 0===N||N.target.removeAttribute("class"),null===e||void 0===e||e.target.setAttribute("class","selected"),C(e)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_main",children:[Object(h.jsx)("span",{className:"username",children:i.user}),Object(h.jsxs)("div",{className:"logout",onClick:function(){b.signOut().then((function(){c(!1)}))},children:[Object(h.jsx)("span",{children:"Logout"}),Object(h.jsx)(H.a,{})]})]})}),Object(h.jsx)("div",{className:"main",onClick:function(){A(null)},children:x.map((function(e){return Object(h.jsx)(w,{trading:e,handleItemSelect:A},e.key)}))}),Object(h.jsx)("div",{className:N?"fab-area unselect fadeout":"fab-area unselect fadein",children:Object(h.jsx)(G.a,{className:r.fab,color:"primary","aria-label":"add",onClick:I,children:Object(h.jsx)(R.a,{})})}),Object(h.jsxs)("div",{className:N?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(G.a,{className:r.fabEdit,color:"secondary","aria-label":"edit",onClick:I,children:Object(h.jsx)(Z.a,{})}),Object(h.jsx)(G.a,{className:r.fab,color:"secondary","aria-label":"delete",onClick:function(){g(!0)},children:Object(h.jsx)(X.a,{})})]}),Object(h.jsx)(K.a,{open:l,onClose:function(){d(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(M,{setOpen:d,selectedItem:N,handleItemSelect:A})})}),Object(h.jsx)(K.a,{open:p,onClose:function(){g(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)($,{setOpen:g,selectedItem:N,handleItemSelect:A})})})]})}));var ae=function(){return Object(h.jsx)(s.a,{children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(l.a,{to:"/login"})}}),Object(h.jsx)(l.b,{exact:!0,path:"/login",component:N}),Object(h.jsx)(l.b,{exact:!0,path:"/main",component:te})]})})};r.a.render(Object(h.jsx)(o.a,{store:k,children:Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(ae,{})})}),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.57458325.chunk.js.map