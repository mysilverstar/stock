(this["webpackJsonpstock-manager"]=this["webpackJsonpstock-manager"]||[]).push([[0],{128:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),i=a(15),r=a.n(i),o=a(18),s=(a(128),a(22)),l=a(14),u=a(54),d=a(19),b=a(63);a(144),a(130);b.a.initializeApp({apiKey:"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k",authDomain:"kistone-stock.firebaseapp.com",projectId:"kistone-stock",storageBucket:"kistone-stock.appspot.com",messagingSenderId:"602515706055",appId:"1:602515706055:web:271be76a0fdc249f6eeee2",measurementId:"G-1CFXPBLJZE"});b.a.auth.Auth.Persistence.LOCAL;var j={google:{get:new b.a.auth.GoogleAuthProvider,id:"google.com"}},p=b.a.auth(),m=b.a.firestore(),h=(a(132),a(3));var O=function(e){var t=e.type,a={google:{background:"#ffffff",color:"#757575",title:"Sign in with Google",titleShort:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"},github:{background:"#333333",title:"Sign in with GitHub",titleShort:"GitHub",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg"},facebook:{background:"#3b5998",title:"Sign in with Facebook",titleShort:"Facebook",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"}}[t],c=j[t];return Object(h.jsx)("div",{className:"signinButton",children:Object(h.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button","data-provider-id":c.id,style:{backgroundColor:a.background},"data-upgraded":",MaterialButton",onClick:function(){p.signInWithRedirect(c.get).then((function(e){})).catch((function(e){alert(e)}))},children:[Object(h.jsx)("span",{className:"firebaseui-idp-icon-wrapper",children:Object(h.jsx)("img",{className:"firebaseui-idp-icon",alt:"",src:a.icon})}),Object(h.jsx)("span",{className:"firebaseui-idp-text firebaseui-idp-text-long",style:{color:a.color},children:a.title})]})})};a(134);var g=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.history,a=e.store,n=e.setLoading;return console.log("Login START"),Object(c.useEffect)((function(){a.authenticate.isAuth&&t.push("/main")}),[t,a.authenticate.isAuth]),Object(h.jsxs)("div",{className:"login_main",children:[Object(h.jsx)("div",{className:"title",children:"Stock Manager"}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(O,{type:"google"})}),Object(h.jsx)("div",{className:"guest_button",onClick:function(){n(!0),p.signInWithEmailAndPassword("guest@guest.com","password")},children:"Guest Login"})]})})),x=(a(135),a(85)),f=Object(x.b)({name:"ReduxStore",initialState:{authenticate:{user:void 0,isAuth:!1},guestLock:!0},reducers:{login:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{authenticate:t.payload})},logout:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{authenticate:{user:void 0,isAuth:!1}})}}}),y=Object(x.a)({reducer:f.reducer}),v=f.actions,k=v.login,N=v.logout,S=y,C=(a(136),a(185)),w=[{key:"namuh",display:"\ub098\ubb34(NAMUH)",priority:0,color:"#00a383"},{key:"hankook",display:"\ud55c\uad6d\ud22c\uc790",priority:1,color:"#104e81"},{key:"mirae",display:"\ubbf8\ub798\uc5d0\uc14b",priority:2,color:"#e97f20"},{key:"kb",display:"KB\uc99d\uad8c",priority:3,color:"#f2b200"},{key:"shinhan",display:"\uc2e0\ud55c\uc54c\ud30c",priority:4,color:"#2e62da"},{key:"samsung",display:"\uc0bc\uc131\uc99d\uad8c",priority:5,color:"#14279b"},{key:"sk",display:"SK\uc99d\uad8c",priority:6,color:"#e31937"}],I=a(171),q=a(174),A=a(186),T=a(187),_=a(176),E=a(177),B=a(178),D=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#000"},formInput:{width:"100%",marginBottom:"10px"}}}));var L=function(e){var t=e.swipeItem,a=e.onConfirm,n=e.onCancel,i=D(),r=Object(c.useState)(t.price),o=Object(l.a)(r,2),s=o[0],u=o[1],d=Object(c.useState)({val:t.quantity,exceed:!1,empty:0===t.quantity}),b=Object(l.a)(d,2),j=b[0],p=b[1];return Object(h.jsxs)("div",{className:i.paper,children:[Object(h.jsx)("h3",{style:{fontSize:"20px",margin:"0 0 20px"},children:"\ub9e4\ub9e4 \uc815\ubcf4"}),Object(h.jsxs)("form",{children:[Object(h.jsxs)(q.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(T.a,{id:"name-input",value:t.key,label:"\uc885\ubaa9\uba85",disabled:!0})]}),Object(h.jsxs)(q.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"price-input",children:"\ub9e4\ub9e4\uac00"}),Object(h.jsx)(T.a,{id:"price-input",value:s,onChange:function(e){u(e.target.value)},label:"\ub9e4\ub9e4\uac00",type:"number",required:!0})]}),Object(h.jsxs)(q.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(A.a,{error:j.exceed||j.empty,htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(T.a,{id:"quantity-input",value:j.val,onChange:function(e){var a=e.target.value;p({val:a,exceed:Number(a)>Number(t.quantity),empty:0===Number(a)})},label:"\uc218\ub7c9",type:"number",required:!0,error:j.exceed||j.empty}),j.empty&&Object(h.jsx)(_.a,{error:!0,id:"accountId-error",children:"\ub9e4\ub9e4\uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),j.exceed&&Object(h.jsx)(_.a,{error:!0,id:"accountId-error",children:"\ubcf4\uc720\uc218\ub7c9\uc744 \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),Object(h.jsxs)(E.a,{children:[Object(h.jsx)(B.a,{color:"primary",onClick:n,children:"\ucde8\uc18c"}),Object(h.jsx)(B.a,{color:"primary",onClick:function(e){e.preventDefault(),j.exceed||j.empty||a({key:t.key,price:t.price,quantity:t.quantity,indate:t.indate,sellquantity:Number(j.val),sellprice:Number(s),backupAll:t.quantity===Number(j.val)})},type:"submit",children:"\ud655\uc778"})]})]})]})};a(137);function M(e){var t=e.tradingKey,a=e.item,n=e.handleItemSelect,i=e.store.authenticate,r=Object(c.useState)(null),o=Object(l.a)(r,2),u=o[0],d=o[1],b=Object(c.useState)(null),j=Object(l.a)(b,2),p=j[0],O=j[1],g=Object(c.useState)(!1),x=Object(l.a)(g,2),f=x[0],y=x[1],v=Object(c.useRef)(!1);Object(c.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var k=function(e){var t=new Date(e.indate);t.setHours(9,0,0,0);var a=((new Date).getTime()-t.getTime())/864e5,c={color:"gray"},n=0;return a>=0&&a<1?(c={color:"chartreuse"},n=1):a>=-2&&a<0?(c={color:"red"},n=2):a<-2&&(c={color:"darkgreen"}),{ddayState:n,changeStyle:c,displayDate:t.getMonth()+1+"/"+t.getDate()}}(a),N=k.ddayState,S=k.changeStyle,I=k.displayDate,q=Object(c.useCallback)((function(){if(p){var e=m.collection("user").doc(i.user),a=e.collection("trading").doc(t).collection("items").doc(p.key),c=e.collection("backup").doc(t),n=c.collection("items").doc(p.key),r=w.find((function(e){return e.key===t}));m.runTransaction((function(e){return e.get(n).then((function(t){var i=t.data();if(e.set(c,{display:r.display,priority:r.priority,color:r.color}),t.exists){var o=(i.sellprice*i.quantity+p.sellprice*p.sellquantity)/(i.quantity+p.sellquantity);e.update(n,{sellprice:o,quantity:i.quantity+p.sellquantity,outdate:(new Date).valueOf()})}else e.set(n,{name:p.key,price:p.price,sellprice:p.sellprice,quantity:p.sellquantity,indate:p.indate,outdate:(new Date).valueOf()});p.backupAll?e.delete(a):e.update(a,{quantity:p.quantity-p.sellquantity})}))})).then((function(){console.log("Transaction successfully committed!"),v.current&&O(null)})).catch((function(e){console.log("Transaction failed: ",e),v.current&&O(null)}))}}),[t,i,p]),A=function(e){var t=e.clientX;return t||(t=e.touches[0].screenX),Number(t.toFixed())},T=Object(c.useCallback)((function(e){Math.abs(A(e)-(null===u||void 0===u?void 0:u.startX))>10||(e.currentTarget.setAttribute("class","tr selected"),n({target:e.currentTarget,tradingKey:t}),e.stopPropagation())}),[t,n,u]),_=Object(c.useCallback)((function(e){d({target:e.currentTarget,key:e.currentTarget.children[0].innerText,price:Number(e.currentTarget.children[1].textContent.replace(",","")),quantity:Number(e.currentTarget.children[2].textContent),indate:Number(e.currentTarget.children[3].getAttribute("originaldate")),startX:A(e),dx:A(e)})}),[]),E=Object(c.useCallback)((function(e){if(u){var t=A(e),a=u.startX>t?t:u.startX;d(Object(s.a)(Object(s.a)({},u),{},{dx:a}))}}),[u]),B=Object(c.useCallback)((function(e){u&&(u.startX-u.dx>100?y(!0):d(null))}),[u]),D=Object(c.useCallback)((function(e){p.backupAll&&"hiderow"===e.animationName?(e.currentTarget.parentElement.setAttribute("style","display: none"),q(),d(null)):p.backupAll||"swipeout"!==e.animationName||(e.currentTarget.setAttribute("class","tr"),q(),d(null))}),[p,q]),M=Object(c.useCallback)((function(e){O(e),y(!1),u.quantity===e.quantity?u.target.setAttribute("class","tr swipeouthide"):u.target.setAttribute("class","tr swipeout")}),[u]),R=Object(c.useCallback)((function(){y(!1),d(null)}),[]);return Object(h.jsxs)("div",{className:"tableitem",children:[Object(h.jsx)("div",{className:"tr-bg",children:"\ubcf4\uad00"}),Object(h.jsxs)("div",{className:"tr",onClick:T,onTouchStart:_,onTouchMove:E,onTouchEnd:B,onMouseDown:_,onMouseMove:E,onMouseUpCapture:B,onAnimationEnd:D,style:(null===u||void 0===u?void 0:u.key)===a.name?{left:"".concat(u.dx-u.startX,"px")}:{},children:[Object(h.jsx)("div",{className:"item stock_name",children:a.name}),Object(h.jsx)("div",{className:"item stock_price",children:String(a.price).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("div",{className:"item stock_quantity",children:a.quantity}),Object(h.jsxs)("div",{className:"item stock_indate",style:S,originaldate:a.indate,children:[Object(h.jsx)("span",{className:"main_text",children:I}),N>0&&Object(h.jsx)("span",{className:"sub_text",style:{color:"inherit"},children:1===N?"\uc785\uace0\uc644\ub8cc":"\uc785\uace0\uc608\uc815"})]})]}),Object(h.jsx)(C.a,{open:f,onClose:function(){return y(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(L,{swipeItem:u,onConfirm:M,onCancel:R})})})]})}var R=Object(o.b)((function(e){return{store:e}}),null)(n.a.memo(M));var F=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,n=e.handleItemSelect,i=Object(c.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1],u=t.key,d=t.data,b=d.color,j=d.display,p=a.authenticate;return Object(c.useEffect)((function(){return m.collection("user").doc(p.user).collection("trading").doc(u).collection("items").orderBy("indate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):m.collection("user").doc(p.user).collection("trading").doc(u).delete()}))}),[p,u]),Object(h.jsxs)("div",{className:"stocktable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:b},children:Object(h.jsx)("strong",{children:j})}),Object(h.jsxs)("div",{className:"table",children:[Object(h.jsx)("div",{className:"thead",children:Object(h.jsxs)("div",{className:"tr",children:[Object(h.jsx)("div",{className:"stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)("div",{className:"stock_price",children:"\ub2e8\uac00"}),Object(h.jsx)("div",{className:"stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsx)("div",{className:"stock_indate",children:"\uc0c1\uc7a5\uc77c"})]})}),Object(h.jsx)("div",{className:"tbody",children:o.map((function(e){return Object(h.jsx)(R,{tradingKey:u,item:e,handleItemSelect:n},e.name)}))})]})]})})),z=a(101),K=a(184),P=a(189),X=a(25),W=a(183),G=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},selectEmpty:{marginTop:e.spacing(1),marginBottom:e.spacing(3)},formTrading:{minWidth:120},formInput:{width:"100%",marginBottom:"10px"}}}));var H=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,n=e.selectedItem,i=e.handleItemSelect,r=0,o="",s="",u="",d=new Date;n&&(w.forEach((function(e,t){e.key===n.tradingKey&&(r=t)})),o=n.target.children[0].textContent,s=n.target.children[1].textContent.replace(",",""),u=n.target.children[2].textContent,d=new Date(Number(n.target.children[3].getAttribute("originaldate"))));var b=G(),j=Object(c.useState)(r),p=Object(l.a)(j,2),O=p[0],g=p[1],x=Object(c.useState)(o),f=Object(l.a)(x,2),y=f[0],v=f[1],k=Object(c.useState)(s),N=Object(l.a)(k,2),S=N[0],C=N[1],I=Object(c.useState)(u),_=Object(l.a)(I,2),D=_[0],L=_[1],M=Object(c.useState)(d),R=Object(l.a)(M,2),F=R[0],H=R[1],J=a.authenticate,Y=null!==n;return Object(h.jsx)("div",{className:b.paper,children:Object(h.jsxs)("form",{children:[Object(h.jsxs)(q.a,{className:b.formTrading,children:[Object(h.jsx)(A.a,{id:"trading-select-label",children:"\uc99d\uad8c\uacc4\uc88c"}),Object(h.jsx)(K.a,{labelId:"trading-select-label",id:"trading-select",value:O,onChange:function(e){g(e.target.value)},className:b.selectEmpty,required:!0,disabled:Y,children:w.map((function(e,t){return Object(h.jsx)(P.a,{value:t,children:e.display},e.key)}))})]}),Object(h.jsxs)(q.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(T.a,{id:"name-input",value:y,onChange:function(e){v(e.target.value)},label:"\uc885\ubaa9\uba85",required:!0,disabled:Y})]}),Object(h.jsxs)(q.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"price-input",children:"\ub2e8\uac00"}),Object(h.jsx)(T.a,{id:"price-input",value:S,onChange:function(e){C(e.target.value)},label:"\ub2e8\uac00",type:"number"})]}),Object(h.jsxs)(q.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(T.a,{id:"quantity-input",value:D,onChange:function(e){L(e.target.value)},label:"\uc218\ub7c9",type:"number"})]}),Object(h.jsx)(X.a,{utils:z.a,children:Object(h.jsx)(W.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"\uc0c1\uc7a5\uc77c(Month/Day/Year)",value:F,onChange:function(e){H(e)},KeyboardButtonProps:{"aria-label":"change date"},PopoverProps:{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},className:b.formInput})}),Object(h.jsxs)(E.a,{children:[Object(h.jsx)(B.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(B.a,{color:"primary",onClick:function(e){if(e.preventDefault(),a.guestLock&&"guest@guest.com"===J.user)return alert("please sign-in with private account"),t(!1),void i(null);var c=w[O],n=m.collection("user").doc(J.user).collection("trading");n.doc(c.key).set({display:c.display,priority:c.priority,color:c.color}),n.doc(c.key).collection("items").doc(y).set({name:y,price:Number(S),quantity:Number(D),indate:F.valueOf()}).catch((function(e){console.error("Error adding document: ",e)})),t(!1),i(null)},type:"submit",autoFocus:!0,children:n?"\uc218\uc815":"\ucd94\uac00"})]})]})})})),J=a(182),Y=a(93),U=a.n(Y),Z=a(94),Q=a.n(Z),V=a(95),$=a.n(V),ee=a(96),te=a.n(ee),ae=a(75),ce=a.n(ae),ne=a(76),ie=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var re=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,n=e.handleItemSelect,i=e.backup;c||t(!1);var r=null===c||void 0===c?void 0:c.target.children[0].innerText,o=ie(),s=a.authenticate;return Object(h.jsxs)("div",{className:o.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\uc0ad\uc81c"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(E.a,{children:[Object(h.jsx)(B.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(B.a,{color:"primary",onClick:function(){if(a.guestLock&&"guest@guest.com"===s.user)return alert("please sign-in with private account"),t(!1),void n(null);m.collection("user").doc(s.user).collection(i?"backup":"trading").doc(c.tradingKey).collection("items").doc(r).delete().catch((function(e){console.error("Error removing document: ",e)})),t(!1),n(null)},type:"submit",autoFocus:!0,children:"\uc0ad\uc81c"})]})]})})),oe=Object(I.a)((function(e){return{fab:{},fabEdit:{color:e.palette.common.white,backgroundColor:ne.a[500],"&:hover":{backgroundColor:ne.a[600]}},icon:{color:"gray",fontSize:30,position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)"}}}));var se=Object(o.b)((function(e){return{store:e}}),(function(e){return{doLogout:function(){return e(N())}}}))((function(e){var t,a=e.history,n=e.store,i=e.doLogout,r=e.setLoading,o=n.authenticate,d=oe(),b=Object(c.useState)(!1),j=Object(l.a)(b,2),O=j[0],g=j[1],x=Object(c.useState)(!1),f=Object(l.a)(x,2),y=f[0],v=f[1],k=Object(c.useState)([]),N=Object(l.a)(k,2),S=N[0],w=N[1],I=Object(c.useState)(void 0),q=Object(l.a)(I,2),A=q[0],T=q[1];console.log("Main START"),Object(c.useEffect)((function(){return console.log("Main RENDERED"),o.isAuth?m.collection("user").doc(o.user).collection("trading").orderBy("priority","asc").onSnapshot((function(e){setTimeout((function(){r(!1)}),500),w(e.docs.map((function(e){return{key:e.id,data:e.data()}})))})):(console.log("Main goRoot!!"),void a.replace("/"))}),[o,a,r]);var _=function(){g(!0)},E=Object(c.useCallback)((function(e){null===A||void 0===A||A.target.setAttribute("class","tr"),(null===A||void 0===A?void 0:A.target)!==(null===e||void 0===e?void 0:e.target)?T(e):T(null)}),[A]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_main",children:[Object(h.jsx)(u.b,{to:function(e){return Object(s.a)(Object(s.a)({},e),{},{pathname:"/backup"})},children:Object(h.jsx)(U.a,{className:d.icon})}),Object(h.jsx)(u.b,{to:"/ipolist",target:"_blank",rel:"noopener noreferrer",children:Object(h.jsxs)("div",{className:"title",children:[Object(h.jsx)("span",{className:"main-title",children:"Stock Manager"}),Object(h.jsx)("span",{className:"sub-title",children:"@"+(null===(t=o.user)||void 0===t?void 0:t.split("@")[0])})]})}),Object(h.jsxs)("div",{className:"logout",onClick:function(){p.signOut().then((function(){i(!1)}))},children:[Object(h.jsx)("span",{children:"Logout"}),Object(h.jsx)(Q.a,{})]})]})}),Object(h.jsx)("div",{className:"main",onClick:function(){E(null)},children:S.map((function(e){return Object(h.jsx)(F,{trading:e,handleItemSelect:E},e.key)}))}),Object(h.jsx)("div",{className:A?"fab-area unselect fadeout":"fab-area unselect fadein",children:Object(h.jsx)(J.a,{className:d.fab,color:"primary","aria-label":"add",onClick:_,children:Object(h.jsx)($.a,{})})}),void 0!==A&&Object(h.jsxs)("div",{className:A?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(J.a,{className:d.fabEdit,color:"secondary","aria-label":"edit",onClick:_,children:Object(h.jsx)(te.a,{})}),Object(h.jsx)(J.a,{className:d.fab,color:"secondary","aria-label":"delete",onClick:function(){v(!0)},children:Object(h.jsx)(ce.a,{})})]}),Object(h.jsx)(C.a,{open:O,onClose:function(){g(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(H,{setOpen:g,selectedItem:A,handleItemSelect:E})})}),Object(h.jsx)(C.a,{open:y,onClose:function(){v(!1)},"aria-labelledby":"del-stock","aria-describedby":"del-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(re,{setOpen:v,selectedItem:A,handleItemSelect:E})})})]})})),le=a(97),ue=a.n(le);a(139);var de=function(){return Object(h.jsx)("div",{className:"loading-area",children:Object(h.jsx)(ue.a,{type:"spinningBubbles",color:"gray",height:100,width:100})})};a(140),a(141);var be=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,n=e.handleItemSelect,i=Object(c.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1],u=t.key,d=t.data,b=d.color,j=d.display,p=a.authenticate;Object(c.useEffect)((function(){return m.collection("user").doc(p.user).collection("backup").doc(u).collection("items").orderBy("outdate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):m.collection("user").doc(p.user).collection("backup").doc(u).delete()}))}),[p,u]);var O=Object(c.useCallback)((function(e){e.currentTarget.setAttribute("class","tr selected"),n({target:e.currentTarget,tradingKey:u}),e.stopPropagation()}),[u,n]);return Object(h.jsxs)("div",{className:"historytable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:b},children:Object(h.jsx)("strong",{children:j})}),Object(h.jsxs)("div",{className:"table",children:[Object(h.jsx)("div",{className:"thead",children:Object(h.jsxs)("div",{className:"tr",children:[Object(h.jsx)("div",{className:"head stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsxs)("div",{className:"head stock_profit",children:[Object(h.jsx)("span",{className:"main_text",children:"\ud3c9\uac00\uc190\uc775"}),Object(h.jsx)("span",{className:"sub_text",children:"\uc190\uc775\ub960"})]}),Object(h.jsx)("div",{className:"head stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsxs)("div",{className:"head stock_price",children:[Object(h.jsx)("span",{className:"main_text",children:"\ub9e4\ub9e4\uac00"}),Object(h.jsx)("span",{className:"sub_text",children:"\ub9e4\uc785\uac00"})]})]})}),Object(h.jsx)("div",{className:"tbody",children:o.map((function(e){var t=e.sellprice,a=e.price,c=e.quantity,n=(t-a)*c,i=(t-a)/a*100,r={color:"white"};return r=n>0?{color:"#d24f45"}:{color:"#1261c4"},Object(h.jsxs)("div",{className:"tr",onClick:O,children:[Object(h.jsx)("div",{className:"item stock_name",children:e.name}),Object(h.jsxs)("div",{className:"item stock_profit",style:r,children:[Object(h.jsx)("span",{className:"main_text",children:String(n).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("span",{className:"sub_text",children:i.toFixed(2)+" %"})]}),Object(h.jsx)("div",{className:"item stock_quantity",children:c}),Object(h.jsxs)("div",{className:"item stock_price",children:[Object(h.jsx)("span",{className:"main_text",style:r,children:String(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("span",{className:"sub_text",style:{color:"gray"},children:String(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]},e.name)}))})]})]})})),je=a(98),pe=a.n(je),me=a(99),he=a.n(me),Oe=a(100),ge=a.n(Oe),xe=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var fe=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,n=e.handleItemSelect;c||t(!1);var i=xe(),r=a.authenticate;return Object(h.jsxs)("div",{className:i.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\ubcf5\uc6d0"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\ubcf5\uc6d0 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(E.a,{children:[Object(h.jsx)(B.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(B.a,{color:"primary",onClick:function(){if(a.guestLock&&"guest@guest.com"===r.user)return alert("please sign-in with private account"),t(!1),void n(null);var e=c.tradingKey,i=c.target.children[0].textContent,o=m.collection("user").doc(r.user),s=o.collection("trading").doc(e),l=s.collection("items").doc(i),u=o.collection("backup").doc(e).collection("items").doc(i),d=w.find((function(t){return t.key===e}));m.runTransaction((function(e){return e.get(u).then((function(t){var a=t.data();return e.delete(u),a}))})).then((function(e){console.log("Transaction successfully committed!"),m.runTransaction((function(t){return t.get(l).then((function(a){var c=a.data();if(t.set(s,{display:d.display,priority:d.priority,color:d.color}),a.exists)t.update(l,{quantity:c.quantity+e.quantity});else{var n=e.name,i=e.price,r=e.quantity,o=e.indate;t.set(l,{name:n,price:i,quantity:r,indate:o})}}))}))})).catch((function(e){console.log("Transaction failed: ",e)})),t(!1),n(null)},type:"submit",autoFocus:!0,children:"\ubcf5\uc6d0"})]})]})})),ye=Object(I.a)({fab:{},icon:{fontSize:30,position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)"},empty:{fill:"gray",fontSize:100}});var ve=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.history,a=e.store,n=e.setLoading,i=ye(),r=a.authenticate,o=Object(c.useState)([]),s=Object(l.a)(o,2),d=s[0],b=s[1],j=Object(c.useState)(!1),p=Object(l.a)(j,2),O=p[0],g=p[1],x=Object(c.useState)(!1),f=Object(l.a)(x,2),y=f[0],v=f[1],k=Object(c.useState)(void 0),N=Object(l.a)(k,2),S=N[0],w=N[1];Object(c.useEffect)((function(){return console.log("Backup RENDERED"),r.isAuth?m.collection("user").doc(r.user).collection("backup").orderBy("priority","asc").onSnapshot((function(e){n(!1),b(e.docs.map((function(e){return{key:e.id,data:e.data()}})))})):(console.log("Backup goRoot!!"),void t.replace("/"))}),[r,t,n]);var I=Object(c.useCallback)((function(e){null===S||void 0===S||S.target.setAttribute("class","tr"),(null===S||void 0===S?void 0:S.target)!==(null===e||void 0===e?void 0:e.target)?w(e):w(null)}),[S]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_backup",children:[Object(h.jsx)(u.b,{to:"/main",children:Object(h.jsx)(pe.a,{className:i.icon})}),Object(h.jsx)("div",{className:"title",children:Object(h.jsx)("span",{className:"main-title",children:"\ub9e4\ub9e4\uc190\uc775"})})]})}),Object(h.jsxs)("div",{className:"backup",onClick:function(){I(null)},children:[0===d.length&&Object(h.jsxs)("div",{className:"backup-empty",children:[Object(h.jsx)(he.a,{className:i.empty}),Object(h.jsx)("p",{children:"\ubc31\uc5c5\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),d.map((function(e){return Object(h.jsx)(be,{trading:e,handleItemSelect:I},e.key)}))]}),void 0!==S&&Object(h.jsxs)("div",{className:S?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(J.a,{className:i.fab,color:"primary","aria-label":"restore",onClick:function(){g(!0)},children:Object(h.jsx)(ge.a,{})}),Object(h.jsx)(J.a,{className:i.fab,color:"secondary","aria-label":"delete",onClick:function(){v(!0)},children:Object(h.jsx)(ce.a,{})})]}),Object(h.jsx)(C.a,{open:O,onClose:function(){g(!1)},"aria-labelledby":"restore-stock","aria-describedby":"restore-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(fe,{setOpen:g,selectedItem:S,handleItemSelect:I,backup:!0})})}),Object(h.jsx)(C.a,{open:y,onClose:function(){v(!1)},"aria-labelledby":"del-stock","aria-describedby":"del-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(re,{setOpen:v,selectedItem:S,handleItemSelect:I,backup:!0})})})]})}));var ke=Object(o.b)((function(e){return{store:e}}),(function(e){return{doLogin:function(t){return e(k({user:t,isAuth:!0}))}}}))((function(e){var t=e.store,a=e.doLogin,n=t.authenticate,i=Object(c.useState)(!0),r=Object(l.a)(i,2),o=r[0],b=r[1];return console.log("App START",o),Object(c.useEffect)((function(){return console.log("App RENDERED"),p.onAuthStateChanged((function(e){console.log("App onAuthStateChanged",e),e?a(e.email):setTimeout((function(){b(!1)}),500)}))}),[a]),Object(h.jsxs)(u.a,{children:[o&&Object(h.jsx)(de,{}),Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{exact:!0,path:"/",render:function(){return n.isAuth?Object(h.jsx)(d.a,{to:"/main"}):Object(h.jsx)(d.a,{to:"/login"})}}),Object(h.jsx)(d.b,{exact:!0,path:"/login",render:function(e){return Object(h.jsx)(g,Object(s.a)(Object(s.a)({},e),{},{setLoading:b}))}}),Object(h.jsx)(d.b,{exact:!0,path:"/main",render:function(e){return Object(h.jsx)(se,Object(s.a)(Object(s.a)({},e),{},{setLoading:b}))}}),Object(h.jsx)(d.b,{exact:!0,path:"/backup",render:function(e){return Object(h.jsx)(ve,Object(s.a)(Object(s.a)({},e),{},{setLoading:b}))}}),Object(h.jsx)(d.b,{exact:!0,path:"/ipolist",component:function(){return window.location.href="http://sereon.synology.me:38888/po/IPOlist",null}})]})]})}));r.a.render(Object(h.jsx)(o.a,{store:S,children:Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(ke,{})})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.3c866fbf.chunk.js.map