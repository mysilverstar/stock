(this["webpackJsonpstock-manager"]=this["webpackJsonpstock-manager"]||[]).push([[0],{128:function(e,t,a){},132:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),i=a(15),r=a.n(i),o=a(18),s=(a(128),a(26)),l=a(12),d=a(54),u=a(19),b=a(63);a(144),a(130);b.a.initializeApp({apiKey:"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k",authDomain:"kistone-stock.firebaseapp.com",projectId:"kistone-stock",storageBucket:"kistone-stock.appspot.com",messagingSenderId:"602515706055",appId:"1:602515706055:web:271be76a0fdc249f6eeee2",measurementId:"G-1CFXPBLJZE"});b.a.auth.Auth.Persistence.LOCAL;var j={google:{get:new b.a.auth.GoogleAuthProvider,id:"google.com"}},p=b.a.auth(),m=b.a.firestore(),h=(a(132),a(3));var O=function(e){var t=e.type,a={google:{background:"#ffffff",color:"#757575",title:"Sign in with Google",titleShort:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"},github:{background:"#333333",title:"Sign in with GitHub",titleShort:"GitHub",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg"},facebook:{background:"#3b5998",title:"Sign in with Facebook",titleShort:"Facebook",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"}}[t],c=j[t];return Object(h.jsx)("div",{className:"signinButton",children:Object(h.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button","data-provider-id":c.id,style:{backgroundColor:a.background},"data-upgraded":",MaterialButton",onClick:function(){p.signInWithRedirect(c.get).then((function(e){})).catch((function(e){alert(e)}))},children:[Object(h.jsx)("span",{className:"firebaseui-idp-icon-wrapper",children:Object(h.jsx)("img",{className:"firebaseui-idp-icon",alt:"",src:a.icon})}),Object(h.jsx)("span",{className:"firebaseui-idp-text firebaseui-idp-text-long",style:{color:a.color},children:a.title})]})})};a(134);var x=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.history,a=e.store,n=e.setLoading;console.log("Login START");var i=a.authenticate;return Object(c.useEffect)((function(){i.checked&&i.isAuth&&t.push("/main")}),[t,i]),Object(h.jsxs)("div",{className:"login_main",children:[Object(h.jsx)("div",{className:"title",children:"Stock Manager"}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(O,{type:"google"})}),Object(h.jsx)("div",{className:"guest_button",onClick:function(){n(!0),p.signInWithEmailAndPassword("guest@guest.com","password")},children:"Guest Login"})]})})),g=(a(135),a(85)),f=Object(g.b)({name:"ReduxStore",initialState:{authenticate:{user:void 0,isAuth:!1,checked:!1},guestlock:!0},reducers:{logon:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{authenticate:{user:t.payload,isAuth:!!t.payload,checked:!0}})},testmode:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{guestlock:!t.payload})}}}),y=Object(g.a)({reducer:f.reducer}),v=f.actions,k=v.logon,N=(v.testmode,y),S=(a(136),a(185)),C=[{key:"namuh",display:"\ub098\ubb34(NAMUH)",priority:0,color:"#00a383"},{key:"hankook",display:"\ud55c\uad6d\ud22c\uc790",priority:1,color:"#104e81"},{key:"mirae",display:"\ubbf8\ub798\uc5d0\uc14b",priority:2,color:"#e97f20"},{key:"kb",display:"KB\uc99d\uad8c",priority:3,color:"#f2b200"},{key:"shinhan",display:"\uc2e0\ud55c\uc54c\ud30c",priority:4,color:"#2e62da"},{key:"samsung",display:"\uc0bc\uc131\uc99d\uad8c",priority:5,color:"#14279b"},{key:"sk",display:"SK\uc99d\uad8c",priority:6,color:"#e31937"}],w=a(171),I=a(174),q=a(186),T=a(187),A=a(176),_=a(177),E=a(178),B=Object(w.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#000"},formInput:{width:"100%",marginBottom:"10px"}}}));var D=function(e){var t=e.swipeItem,a=e.onConfirm,n=e.onCancel,i=B(),r=Object(c.useState)(t.price),o=Object(l.a)(r,2),s=o[0],d=o[1],u=Object(c.useState)({val:t.quantity,exceed:!1,empty:0===t.quantity}),b=Object(l.a)(u,2),j=b[0],p=b[1];return Object(h.jsxs)("div",{className:i.paper,children:[Object(h.jsx)("h3",{style:{fontSize:"20px",margin:"0 0 20px"},children:"\ub9e4\ub9e4 \uc815\ubcf4"}),Object(h.jsxs)("form",{children:[Object(h.jsxs)(I.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(q.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(T.a,{id:"name-input",value:t.key,label:"\uc885\ubaa9\uba85",disabled:!0})]}),Object(h.jsxs)(I.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(q.a,{htmlFor:"price-input",children:"\ub9e4\ub9e4\uac00"}),Object(h.jsx)(T.a,{id:"price-input",value:s,onChange:function(e){d(e.target.value)},label:"\ub9e4\ub9e4\uac00",type:"number",required:!0})]}),Object(h.jsxs)(I.a,{variant:"outlined",className:i.formInput,children:[Object(h.jsx)(q.a,{error:j.exceed||j.empty,htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(T.a,{id:"quantity-input",value:j.val,onChange:function(e){var a=e.target.value;p({val:a,exceed:Number(a)>Number(t.quantity),empty:0===Number(a)})},label:"\uc218\ub7c9",type:"number",required:!0,error:j.exceed||j.empty}),j.empty&&Object(h.jsx)(A.a,{error:!0,id:"accountId-error",children:"\ub9e4\ub9e4\uc218\ub7c9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),j.exceed&&Object(h.jsx)(A.a,{error:!0,id:"accountId-error",children:"\ubcf4\uc720\uc218\ub7c9\uc744 \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),Object(h.jsxs)(_.a,{children:[Object(h.jsx)(E.a,{color:"primary",onClick:n,children:"\ucde8\uc18c"}),Object(h.jsx)(E.a,{color:"primary",onClick:function(e){e.preventDefault(),j.exceed||j.empty||a({key:t.key,price:t.price,quantity:t.quantity,indate:t.indate,sellquantity:Number(j.val),sellprice:Number(s),backupAll:t.quantity===Number(j.val)})},type:"submit",children:"\ud655\uc778"})]})]})]})};a(137);function F(e){var t=e.tradingKey,a=e.item,n=e.handleItemSelect,i=e.store.authenticate,r=Object(c.useState)(null),o=Object(l.a)(r,2),d=o[0],u=o[1],b=Object(c.useState)(null),j=Object(l.a)(b,2),p=j[0],O=j[1],x=Object(c.useState)(!1),g=Object(l.a)(x,2),f=g[0],y=g[1],v=Object(c.useRef)(!1);Object(c.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);var k=function(e){var t=new Date(e.indate);t.setHours(9,0,0,0);var a=((new Date).getTime()-t.getTime())/864e5,c={color:"gray"},n=0;return a>=0&&a<1?(c={color:"chartreuse"},n=1):a>=-2&&a<0?(c={color:"red"},n=2):a<-2&&(c={color:"darkgreen"}),{ddayState:n,changeStyle:c,displayDate:t.getMonth()+1+"/"+t.getDate()}}(a),N=k.ddayState,w=k.changeStyle,I=k.displayDate,q=Object(c.useCallback)((function(){if(p){var e=m.collection("user").doc(i.user),a=e.collection("trading").doc(t).collection("items").doc(p.key),c=e.collection("backup").doc(t),n=c.collection("items").doc(p.key),r=C.find((function(e){return e.key===t}));m.runTransaction((function(e){return e.get(n).then((function(t){var i=t.data();if(e.set(c,{display:r.display,priority:r.priority,color:r.color}),t.exists){var o=(i.sellprice*i.quantity+p.sellprice*p.sellquantity)/(i.quantity+p.sellquantity);e.update(n,{sellprice:Number(o.toFixed(0)),quantity:i.quantity+p.sellquantity,outdate:(new Date).valueOf()})}else e.set(n,{name:p.key,price:p.price,sellprice:p.sellprice,quantity:p.sellquantity,indate:p.indate,outdate:(new Date).valueOf()});p.backupAll?e.delete(a):e.update(a,{quantity:p.quantity-p.sellquantity})}))})).then((function(){console.log("Transaction successfully committed!"),v.current&&O(null)})).catch((function(e){console.log("Transaction failed: ",e),v.current&&O(null)}))}}),[t,i,p]),T=function(e){var t=e.clientX;return t||(t=e.touches[0].screenX),Number(t.toFixed())},A=Object(c.useCallback)((function(e){Math.abs(T(e)-(null===d||void 0===d?void 0:d.startX))>10||(e.currentTarget.setAttribute("class","tr selected"),n({target:e.currentTarget,tradingKey:t}),e.stopPropagation())}),[t,n,d]),_=Object(c.useCallback)((function(e){u({target:e.currentTarget,key:e.currentTarget.children[0].innerText,price:Number(e.currentTarget.children[1].textContent.replace(",","")),quantity:Number(e.currentTarget.children[2].textContent),indate:Number(e.currentTarget.children[3].getAttribute("originaldate")),startX:T(e),dx:T(e)})}),[]),E=Object(c.useCallback)((function(e){if(d){var t=T(e),a=d.startX>t?t:d.startX;u(Object(s.a)(Object(s.a)({},d),{},{dx:a}))}}),[d]),B=Object(c.useCallback)((function(e){d&&(d.startX-d.dx>100?y(!0):u(null))}),[d]),F=Object(c.useCallback)((function(e){p.backupAll&&"hiderow"===e.animationName?(e.currentTarget.parentElement.setAttribute("style","display: none"),q(),u(null)):p.backupAll||"swipeout"!==e.animationName||(e.currentTarget.setAttribute("class","tr"),q(),u(null))}),[p,q]),R=Object(c.useCallback)((function(e){O(e),y(!1),d.quantity===e.quantity?d.target.setAttribute("class","tr swipeouthide"):d.target.setAttribute("class","tr swipeout")}),[d]),M=Object(c.useCallback)((function(){y(!1),u(null)}),[]);return Object(h.jsxs)("div",{className:"tableitem",children:[Object(h.jsx)("div",{className:"tr-bg",children:"\ubcf4\uad00"}),Object(h.jsxs)("div",{className:"tr",onClick:A,onTouchStart:_,onTouchMove:E,onTouchEnd:B,onMouseDown:_,onMouseMove:E,onMouseUpCapture:B,onAnimationEnd:F,style:(null===d||void 0===d?void 0:d.key)===a.name?{left:"".concat(d.dx-d.startX,"px")}:{},children:[Object(h.jsx)("div",{className:"item stock_name",children:a.name}),Object(h.jsx)("div",{className:"item stock_price",children:String(a.price).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("div",{className:"item stock_quantity",children:a.quantity}),Object(h.jsxs)("div",{className:"item stock_indate",style:w,originaldate:a.indate,children:[Object(h.jsx)("span",{className:"main_text",children:I}),N>0&&Object(h.jsx)("span",{className:"sub_text",style:{color:"inherit"},children:1===N?"\uc785\uace0\uc644\ub8cc":"\uc785\uace0\uc608\uc815"})]})]}),Object(h.jsx)(S.a,{open:f,onClose:function(){return y(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(D,{swipeItem:d,onConfirm:R,onCancel:M})})})]})}var R=Object(o.b)((function(e){return{store:e}}),null)(n.a.memo(F));var M=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,n=e.handleItemSelect,i=Object(c.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1],d=t.key,u=t.data,b=u.color,j=u.display,p=a.authenticate;return Object(c.useEffect)((function(){return m.collection("user").doc(p.user).collection("trading").doc(d).collection("items").orderBy("indate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):m.collection("user").doc(p.user).collection("trading").doc(d).delete()}))}),[p,d]),Object(h.jsxs)("div",{className:"stocktable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:b},children:Object(h.jsx)("strong",{children:j})}),Object(h.jsxs)("div",{className:"table",children:[Object(h.jsx)("div",{className:"thead",children:Object(h.jsxs)("div",{className:"tr",children:[Object(h.jsx)("div",{className:"stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)("div",{className:"stock_price",children:"\ub2e8\uac00"}),Object(h.jsx)("div",{className:"stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsx)("div",{className:"stock_indate",children:"\uc0c1\uc7a5\uc77c"})]})}),Object(h.jsx)("div",{className:"tbody",children:o.map((function(e){return Object(h.jsx)(R,{tradingKey:d,item:e,handleItemSelect:n},e.name)}))})]})]})})),z=a(101),L=a(184),K=a(189),P=a(24),X=a(183),W=Object(w.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},selectEmpty:{marginTop:e.spacing(1),marginBottom:e.spacing(3)},formTrading:{minWidth:120},formInput:{width:"100%",marginBottom:"10px"}}}));var G=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,n=e.selectedItem,i=e.handleItemSelect,r=0,o="",s="",d="",u=new Date;n&&(C.forEach((function(e,t){e.key===n.tradingKey&&(r=t)})),o=n.target.children[0].textContent,s=n.target.children[1].textContent.replace(",",""),d=n.target.children[2].textContent,u=new Date(Number(n.target.children[3].getAttribute("originaldate"))));var b=W(),j=Object(c.useState)(r),p=Object(l.a)(j,2),O=p[0],x=p[1],g=Object(c.useState)(o),f=Object(l.a)(g,2),y=f[0],v=f[1],k=Object(c.useState)(s),N=Object(l.a)(k,2),S=N[0],w=N[1],A=Object(c.useState)(d),B=Object(l.a)(A,2),D=B[0],F=B[1],R=Object(c.useState)(u),M=Object(l.a)(R,2),G=M[0],U=M[1],H=a.authenticate,J=!!n;return Object(h.jsx)("div",{className:b.paper,children:Object(h.jsxs)("form",{children:[Object(h.jsxs)(I.a,{className:b.formTrading,children:[Object(h.jsx)(q.a,{id:"trading-select-label",children:"\uc99d\uad8c\uacc4\uc88c"}),Object(h.jsx)(L.a,{labelId:"trading-select-label",id:"trading-select",value:O,onChange:function(e){x(e.target.value)},className:b.selectEmpty,required:!0,disabled:J,children:C.map((function(e,t){return Object(h.jsx)(K.a,{value:t,children:e.display},e.key)}))})]}),Object(h.jsxs)(I.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(q.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(T.a,{id:"name-input",value:y,onChange:function(e){v(e.target.value)},label:"\uc885\ubaa9\uba85",required:!0,disabled:J})]}),Object(h.jsxs)(I.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(q.a,{htmlFor:"price-input",children:"\ub2e8\uac00"}),Object(h.jsx)(T.a,{id:"price-input",value:S,onChange:function(e){w(e.target.value)},label:"\ub2e8\uac00",type:"number"})]}),Object(h.jsxs)(I.a,{variant:"outlined",className:b.formInput,children:[Object(h.jsx)(q.a,{htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(T.a,{id:"quantity-input",value:D,onChange:function(e){F(e.target.value)},label:"\uc218\ub7c9",type:"number"})]}),Object(h.jsx)(P.a,{utils:z.a,children:Object(h.jsx)(X.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"\uc0c1\uc7a5\uc77c(Month/Day/Year)",value:G,onChange:function(e){U(e)},KeyboardButtonProps:{"aria-label":"change date"},PopoverProps:{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},className:b.formInput})}),Object(h.jsxs)(_.a,{children:[Object(h.jsx)(E.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(E.a,{color:"primary",onClick:function(e){if(e.preventDefault(),a.guestlock&&"guest@guest.com"===H.user)return alert("please sign-in with private account"),t(!1),void i(null);var c=C[O],n=m.collection("user").doc(H.user).collection("trading");n.doc(c.key).set({display:c.display,priority:c.priority,color:c.color}),n.doc(c.key).collection("items").doc(y).set({name:y,price:Number(S),quantity:Number(D),indate:G.valueOf()}).catch((function(e){console.error("Error adding document: ",e)})),t(!1),i(null)},type:"submit",autoFocus:!0,children:n?"\uc218\uc815":"\ucd94\uac00"})]})]})})})),U=a(182),H=a(94),J=a.n(H),Y=a(95),Z=a.n(Y),Q=a(96),V=a.n(Q),$=a(97),ee=a.n($),te=a(75),ae=a.n(te),ce=a(76),ne=Object(w.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var ie=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,n=e.handleItemSelect,i=e.backup;c||t(!1);var r=null===c||void 0===c?void 0:c.target.children[0].innerText,o=ne(),s=a.authenticate;return Object(h.jsxs)("div",{className:o.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\uc0ad\uc81c"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(_.a,{children:[Object(h.jsx)(E.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(E.a,{color:"primary",onClick:function(){if(a.guestlock&&"guest@guest.com"===s.user)return alert("please sign-in with private account"),t(!1),void n(null);m.collection("user").doc(s.user).collection(i?"backup":"trading").doc(c.tradingKey).collection("items").doc(r).delete().catch((function(e){console.error("Error removing document: ",e)})),t(!1),n(null)},type:"submit",autoFocus:!0,children:"\uc0ad\uc81c"})]})]})})),re=a(93),oe=a.n(re);a(138);var se=function(){return Object(h.jsx)("div",{className:"loading-area",children:Object(h.jsx)(oe.a,{type:"spinningBubbles",color:"gray",height:100,width:100})})},le=Object(w.a)((function(e){return{fab:{},fabEdit:{color:e.palette.common.white,backgroundColor:ce.a[500],"&:hover":{backgroundColor:ce.a[600]}},icon:{color:"gray",fontSize:30,position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)"}}}));var de=Object(o.b)((function(e){return{store:e}}),(function(e){return{setUser:function(t){return e(k(t))}}}))((function(e){var t,a=e.history,n=e.store,i=e.setUser,r=e.setLoading;console.log("Main START");var o=n.authenticate,s=le(),u=Object(c.useState)(!1),b=Object(l.a)(u,2),j=b[0],O=b[1],x=Object(c.useState)(!1),g=Object(l.a)(x,2),f=g[0],y=g[1],v=Object(c.useState)([]),k=Object(l.a)(v,2),N=k[0],C=k[1],w=Object(c.useState)(void 0),I=Object(l.a)(w,2),q=I[0],T=I[1],A=Object(c.useState)(!0),_=Object(l.a)(A,2),E=_[0],B=_[1];Object(c.useEffect)((function(){return console.log("Main RENDERED"),o.checked&&!o.isAuth?(console.log("Main goRoot!!"),void a.replace("/")):m.collection("user").doc(o.user).collection("trading").orderBy("priority","asc").onSnapshot((function(e){C(e.docs.map((function(e){return{key:e.id,data:e.data()}}))),setTimeout((function(){r(!1),B(!1)}),500)}))}),[o,a,r]);var D=function(){O(!0)},F=Object(c.useCallback)((function(e){null===q||void 0===q||q.target.setAttribute("class","tr"),(null===q||void 0===q?void 0:q.target)!==(null===e||void 0===e?void 0:e.target)?T(e):T(null)}),[q]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_main",children:[Object(h.jsx)(d.b,{to:"/backup",children:Object(h.jsx)(J.a,{className:s.icon})}),Object(h.jsx)(d.b,{to:"/ipolist",target:"_blank",rel:"noopener noreferrer",children:Object(h.jsxs)("div",{className:"title",children:[Object(h.jsx)("span",{className:"main-title",children:"Stock Manager"}),Object(h.jsx)("span",{className:"sub-title",children:"@"+(null===(t=o.user)||void 0===t?void 0:t.split("@")[0])})]})}),Object(h.jsxs)("div",{className:"logout",onClick:function(){p.signOut().then((function(){i(void 0)}))},children:[Object(h.jsx)("span",{children:"Logout"}),Object(h.jsx)(Z.a,{})]})]})}),E&&Object(h.jsx)(se,{}),Object(h.jsx)("div",{className:"main",onClick:function(){F(null)},children:N.map((function(e){return Object(h.jsx)(M,{trading:e,handleItemSelect:F},e.key)}))}),Object(h.jsx)("div",{className:q?"fab-area unselect fadeout":"fab-area unselect fadein",children:Object(h.jsx)(U.a,{className:s.fab,color:"primary","aria-label":"add",onClick:D,children:Object(h.jsx)(V.a,{})})}),void 0!==q&&Object(h.jsxs)("div",{className:q?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(U.a,{className:s.fabEdit,"aria-label":"edit",onClick:D,children:Object(h.jsx)(ee.a,{})}),Object(h.jsx)(U.a,{className:s.fab,color:"secondary","aria-label":"delete",onClick:function(){y(!0)},children:Object(h.jsx)(ae.a,{})})]}),Object(h.jsx)(S.a,{open:j,onClose:function(){O(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(G,{setOpen:O,selectedItem:q,handleItemSelect:F})})}),Object(h.jsx)(S.a,{open:f,onClose:function(){y(!1)},"aria-labelledby":"del-stock","aria-describedby":"del-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(ie,{setOpen:y,selectedItem:q,handleItemSelect:F})})})]})}));a(140),a(141);var ue=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,a=e.store,n=e.handleItemSelect,i=Object(c.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1],d=t.key,u=t.data,b=u.color,j=u.display,p=a.authenticate;Object(c.useEffect)((function(){return m.collection("user").doc(p.user).collection("backup").doc(d).collection("items").orderBy("outdate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):m.collection("user").doc(p.user).collection("backup").doc(d).delete()}))}),[p,d]);var O=Object(c.useCallback)((function(e){e.currentTarget.setAttribute("class","tr selected"),n({target:e.currentTarget,tradingKey:d}),e.stopPropagation()}),[d,n]);return Object(h.jsxs)("div",{className:"historytable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:b},children:Object(h.jsx)("strong",{children:j})}),Object(h.jsxs)("div",{className:"table",children:[Object(h.jsx)("div",{className:"thead",children:Object(h.jsxs)("div",{className:"tr",children:[Object(h.jsx)("div",{className:"head stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsxs)("div",{className:"head stock_profit",children:[Object(h.jsx)("span",{className:"main_text",children:"\ud3c9\uac00\uc190\uc775"}),Object(h.jsx)("span",{className:"sub_text",children:"\uc190\uc775\ub960"})]}),Object(h.jsx)("div",{className:"head stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsxs)("div",{className:"head stock_price",children:[Object(h.jsx)("span",{className:"main_text",children:"\ub9e4\ub9e4\uac00"}),Object(h.jsx)("span",{className:"sub_text",children:"\ub9e4\uc785\uac00"})]})]})}),Object(h.jsx)("div",{className:"tbody",children:o.map((function(e){var t=e.sellprice,a=e.price,c=e.quantity,n=(t-a)*c,i=(t-a)/a*100,r={color:"white"};return n>0?r={color:"#d24f45"}:n<0&&(r={color:"#1261c4"}),Object(h.jsxs)("div",{className:"tr",onClick:O,children:[Object(h.jsx)("div",{className:"item stock_name",children:e.name}),Object(h.jsxs)("div",{className:"item stock_profit",style:r,children:[Object(h.jsx)("span",{className:"main_text",children:String(n.toFixed(0)).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("span",{className:"sub_text",children:i.toFixed(2)+" %"})]}),Object(h.jsx)("div",{className:"item stock_quantity",children:c}),Object(h.jsxs)("div",{className:"item stock_price",children:[Object(h.jsx)("span",{className:"main_text",style:r,children:String(t).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("span",{className:"sub_text",style:{color:"gray"},children:String(a).replace(/\B(?=(\d{3})+(?!\d))/g,",")})]})]},e.name)}))})]})]})})),be=a(98),je=a.n(be),pe=a(99),me=a.n(pe),he=a(100),Oe=a.n(he),xe=Object(w.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var ge=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,a=e.store,c=e.selectedItem,n=e.handleItemSelect;c||t(!1);var i=xe(),r=a.authenticate;return Object(h.jsxs)("div",{className:i.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\ubcf5\uc6d0"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\ubcf5\uc6d0 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(_.a,{children:[Object(h.jsx)(E.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(E.a,{color:"primary",onClick:function(){if(a.guestlock&&"guest@guest.com"===r.user)return alert("please sign-in with private account"),t(!1),void n(null);var e=c.tradingKey,i=c.target.children[0].textContent,o=m.collection("user").doc(r.user),s=o.collection("trading").doc(e),l=s.collection("items").doc(i),d=o.collection("backup").doc(e).collection("items").doc(i),u=C.find((function(t){return t.key===e}));m.runTransaction((function(e){return e.get(d).then((function(t){var a=t.data();return e.delete(d),a}))})).then((function(e){console.log("Transaction successfully committed!"),m.runTransaction((function(t){return t.get(l).then((function(a){var c=a.data();if(t.set(s,{display:u.display,priority:u.priority,color:u.color}),a.exists)t.update(l,{quantity:c.quantity+e.quantity});else{var n=e.name,i=e.price,r=e.quantity,o=e.indate;t.set(l,{name:n,price:i,quantity:r,indate:o})}}))}))})).catch((function(e){console.log("Transaction failed: ",e)})),t(!1),n(null)},type:"submit",autoFocus:!0,children:"\ubcf5\uc6d0"})]})]})})),fe=Object(w.a)({fab:{},icon:{fontSize:30,position:"absolute",left:"20px",top:"50%",transform:"translateY(-50%)"},empty:{fill:"gray",fontSize:100}});var ye=Object(o.b)((function(e){return{store:e}}),null)((function(e){var t=e.history,a=e.store,n=e.setLoading;console.log("Backup START");var i=fe(),r=a.authenticate,o=Object(c.useState)([]),s=Object(l.a)(o,2),u=s[0],b=s[1],j=Object(c.useState)(!1),p=Object(l.a)(j,2),O=p[0],x=p[1],g=Object(c.useState)(!1),f=Object(l.a)(g,2),y=f[0],v=f[1],k=Object(c.useState)(void 0),N=Object(l.a)(k,2),C=N[0],w=N[1],I=Object(c.useState)(!0),q=Object(l.a)(I,2),T=q[0],A=q[1];Object(c.useEffect)((function(){return console.log("Backup RENDERED"),r.checked&&!r.isAuth?(console.log("Backup goRoot!!"),void t.replace("/")):m.collection("user").doc(r.user).collection("backup").orderBy("priority","asc").onSnapshot((function(e){b(e.docs.map((function(e){return{key:e.id,data:e.data()}}))),setTimeout((function(){n(!1),A(!1)}),500)}))}),[r,t,n]);var _=Object(c.useCallback)((function(e){null===C||void 0===C||C.target.setAttribute("class","tr"),(null===C||void 0===C?void 0:C.target)!==(null===e||void 0===e?void 0:e.target)?w(e):w(null)}),[C]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_backup",children:[Object(h.jsx)(d.b,{to:"/main",children:Object(h.jsx)(je.a,{className:i.icon})}),Object(h.jsx)("div",{className:"title",children:Object(h.jsx)("span",{className:"main-title",children:"\ub9e4\ub9e4\uc190\uc775"})})]})}),T&&Object(h.jsx)(se,{}),Object(h.jsxs)("div",{className:"backup",onClick:function(){_(null)},children:[0===u.length&&Object(h.jsxs)("div",{className:"backup-empty",children:[Object(h.jsx)(me.a,{className:i.empty}),Object(h.jsx)("p",{children:"\ubc31\uc5c5\ub41c \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),u.map((function(e){return Object(h.jsx)(ue,{trading:e,handleItemSelect:_},e.key)}))]}),void 0!==C&&Object(h.jsxs)("div",{className:C?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(U.a,{className:i.fab,color:"primary","aria-label":"restore",onClick:function(){x(!0)},children:Object(h.jsx)(Oe.a,{})}),Object(h.jsx)(U.a,{className:i.fab,color:"secondary","aria-label":"delete",onClick:function(){v(!0)},children:Object(h.jsx)(ae.a,{})})]}),Object(h.jsx)(S.a,{open:O,onClose:function(){x(!1)},"aria-labelledby":"restore-stock","aria-describedby":"restore-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(ge,{setOpen:x,selectedItem:C,handleItemSelect:_,backup:!0})})}),Object(h.jsx)(S.a,{open:y,onClose:function(){v(!1)},"aria-labelledby":"del-stock","aria-describedby":"del-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(ie,{setOpen:v,selectedItem:C,handleItemSelect:_,backup:!0})})})]})}));var ve=Object(o.b)((function(e){return{store:e}}),(function(e){return{setUser:function(t){return e(k(t))}}}))((function(e){var t=e.store,a=e.setUser,n=Object(c.useState)(!0),i=Object(l.a)(n,2),r=i[0],o=i[1];console.log("App START","loading: "+r);var b=t.authenticate;return Object(c.useEffect)((function(){return console.log("App RENDERED - registering"),p.onAuthStateChanged((function(e){console.log("App onAuthStateChanged",e),a(null===e||void 0===e?void 0:e.email),e||setTimeout((function(){o(!1)}),500)}))}),[a]),Object(h.jsxs)(d.a,{children:[r&&Object(h.jsx)(se,{}),Object(h.jsxs)(u.d,{children:[Object(h.jsx)(u.b,{exact:!0,path:"/",render:function(){return b.isAuth?Object(h.jsx)(u.a,{to:"/main"}):Object(h.jsx)(u.a,{to:"/login"})}}),Object(h.jsx)(u.b,{exact:!0,path:"/login",render:function(e){return Object(h.jsx)(x,Object(s.a)(Object(s.a)({},e),{},{setLoading:o}))}}),Object(h.jsx)(u.b,{exact:!0,path:"/main",render:function(e){return Object(h.jsx)(de,Object(s.a)(Object(s.a)({},e),{},{setLoading:o}))}}),Object(h.jsx)(u.b,{exact:!0,path:"/backup",render:function(e){return Object(h.jsx)(ye,Object(s.a)(Object(s.a)({},e),{},{setLoading:o}))}}),Object(h.jsx)(u.b,{exact:!0,path:"/ipolist",component:function(){return window.location.href="http://sereon.synology.me:38888/po/IPOlist",null}})]})]})}));r.a.render(Object(h.jsx)(o.a,{store:N,children:Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(ve,{})})}),document.getElementById("root"))}},[[142,1,2]]]);
//# sourceMappingURL=main.f0e1588c.chunk.js.map