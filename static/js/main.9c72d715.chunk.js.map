{"version":3,"sources":["utils/firebase.js","components/SigninButton.js","pages/Login.js","store/Store.js","constants/Trading.js","components/input/BackupStock.js","components/table/TableItem.js","components/table/StockTable.js","components/input/AddStock.js","components/input/DeleteStock.js","pages/LoadingTool.js","pages/Main.js","components/table/HistoryTable.js","components/input/RestoreStock.js","components/table/ProfitTable.js","pages/Backup.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","Auth","Persistence","LOCAL","AuthProvider","google","get","GoogleAuthProvider","id","db","firestore","SigninButton","type","meta","background","color","title","titleShort","icon","github","facebook","providerMeta","className","style","backgroundColor","onClick","signInWithRedirect","then","result","catch","error","alert","alt","src","connect","state","store","history","setLoading","authenticate","console","log","useEffect","checked","isAuth","push","signInWithEmailAndPassword","Store","createSlice","name","initialState","user","undefined","guestlock","reducers","logon","action","payload","testmode","configureStore","reducer","actions","Tradings","key","display","priority","useStyles","makeStyles","theme","paper","boxSizing","position","width","maxWidth","palette","borderRadius","boxShadow","shadows","padding","spacing","top","left","transform","formInput","marginBottom","BackupStock","swipeItem","onConfirm","onCancel","classes","useState","price","setPrice","val","quantity","exceed","empty","setQuantity","fontSize","margin","FormControl","variant","InputLabel","htmlFor","OutlinedInput","value","label","disabled","onChange","event","target","required","changed","Number","FormHelperText","DialogActions","Button","preventDefault","indate","sellquantity","sellprice","backupAll","TableItem","tradingKey","item","handleItemSelect","isMounted","useRef","setSwipeItem","backupItem","setBackupItem","open","setOpen","current","date","Date","setHours","diff","getTime","changeStyle","ddayState","displayDate","getMonth","getDate","getDateState","dbBackup","useCallback","rootRef","collection","doc","originRef","backupTradingRef","backupRef","trading","find","runTransaction","transaction","snapshot","data","set","exists","avePrice","update","toFixed","outdate","valueOf","delete","getX","e","x","clientX","touches","screenX","handleItemClick","Math","abs","startX","currentTarget","setAttribute","stopPropagation","handleSwipeStart","children","innerText","textContent","replace","getAttribute","dx","handleSwipeMove","leftonly","handleSwipeEnd","handleAnimationEnd","animationName","parentElement","handleBackupConfirm","backupInfo","handleBackupCancel","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseMove","onMouseUpCapture","onAnimationEnd","String","originaldate","Modal","onClose","React","memo","items","setItems","orderBy","onSnapshot","size","docs","map","selectEmpty","marginTop","formTrading","minWidth","selectedItem","sIndex","sName","sPrice","sQuantity","sDate","forEach","ind","tradingIndex","setTradingIndex","setName","setDate","isModified","Select","labelId","index","MenuItem","utils","DateFnsUtils","disableToolbar","format","KeyboardButtonProps","PopoverProps","anchorOrigin","vertical","horizontal","transformOrigin","dbRef","autoFocus","backup","LoadingTool","height","fab","fabEdit","common","white","green","dispatch","setUser","openDel","setOpenDel","tradings","setTradings","setSelectedItem","reloading","setReloading","setTimeout","handleOpen","to","rel","split","signOut","Fab","setFinance","priceSum","sellpriceSum","finance","profit","profitRatio","profitColor","tradingRef","postTransaction","postSanpshot","originData","ProfitTable","useMemo","fill","openRestore","setOpenRestore","length","loading","onAuthStateChanged","email","exact","path","render","props","component","window","location","href","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9c72d715.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/auth\";\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k\",\r\n  authDomain: \"kistone-stock.firebaseapp.com\",\r\n  projectId: \"kistone-stock\",\r\n  storageBucket: \"kistone-stock.appspot.com\",\r\n  messagingSenderId: \"602515706055\",\r\n  appId: \"1:602515706055:web:271be76a0fdc249f6eeee2\",\r\n  measurementId: \"G-1CFXPBLJZE\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst Persistence = {\r\n  LOCAL: firebase.auth.Auth.Persistence.LOCAL,\r\n};\r\n\r\nconst AuthProvider = {\r\n  google: {\r\n    get: new firebase.auth.GoogleAuthProvider(),\r\n    id: \"google.com\",\r\n  },\r\n};\r\n\r\nconst auth = firebase.auth();\r\nconst db = firebase.firestore();\r\n\r\nexport { auth, Persistence, AuthProvider, db };\r\n","import React from \"react\";\r\nimport { auth, AuthProvider } from \"../utils/firebase\";\r\nimport \"./SigninButton.css\";\r\n\r\nfunction SigninButton({ type }) {\r\n  const typeMeta = {\r\n    google: {\r\n      background: \"#ffffff\",\r\n      color: \"#757575\",\r\n      title: \"Sign in with Google\",\r\n      titleShort: \"Google\",\r\n      icon: \"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\",\r\n    },\r\n    github: {\r\n      background: \"#333333\",\r\n      title: \"Sign in with GitHub\",\r\n      titleShort: \"GitHub\",\r\n      icon: \"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg\",\r\n    },\r\n    facebook: {\r\n      background: \"#3b5998\",\r\n      title: \"Sign in with Facebook\",\r\n      titleShort: \"Facebook\",\r\n      icon: \"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg\",\r\n    },\r\n  };\r\n  const meta = typeMeta[type];\r\n  const providerMeta = AuthProvider[type];\r\n\r\n  const signInWithAnother = () => {\r\n    auth\r\n      .signInWithRedirect(providerMeta.get)\r\n      .then((result) => {})\r\n      .catch((error) => {\r\n        alert(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"signinButton\">\r\n      <button\r\n        className=\"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button\"\r\n        data-provider-id={providerMeta.id}\r\n        style={{ backgroundColor: meta.background }}\r\n        data-upgraded=\",MaterialButton\"\r\n        onClick={signInWithAnother}\r\n      >\r\n        <span className=\"firebaseui-idp-icon-wrapper\">\r\n          <img className=\"firebaseui-idp-icon\" alt=\"\" src={meta.icon} />\r\n        </span>\r\n        <span\r\n          className=\"firebaseui-idp-text firebaseui-idp-text-long\"\r\n          style={{ color: meta.color }}\r\n        >\r\n          {meta.title}\r\n        </span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SigninButton;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport SigninButton from \"../components/SigninButton\";\r\nimport { auth } from \"../utils/firebase\";\r\nimport \"./Login.css\";\r\n\r\nfunction Login({ history, store, setLoading }) {\r\n  const { authenticate } = store;\r\n  console.log(\"Login START\");\r\n\r\n  useEffect(() => {\r\n    if (authenticate.checked && authenticate.isAuth) {\r\n      history.push(\"/main\");\r\n    }\r\n  }, [history, authenticate]);\r\n\r\n  return (\r\n    <div className=\"login_main\">\r\n      <div className=\"title\">Stock Manager</div>\r\n      <div className=\"button\">\r\n        <SigninButton type=\"google\" />\r\n      </div>\r\n\r\n      <div\r\n        className=\"guest_button\"\r\n        onClick={() => {\r\n          setLoading(true);\r\n          auth.signInWithEmailAndPassword(\"guest@guest.com\", \"password\");\r\n        }}\r\n      >\r\n        Guest Login\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Login);\r\n","import { configureStore, createSlice } from \"@reduxjs/toolkit\";\r\n\r\nexport const Store = createSlice({\r\n  name: \"ReduxStore\",\r\n  initialState: {\r\n    authenticate: { user: undefined, isAuth: false, checked: false },\r\n    guestlock: true,\r\n  },\r\n  reducers: {\r\n    logon: (state, action) => ({\r\n      ...state,\r\n      authenticate: {\r\n        user: action.payload,\r\n        isAuth: !!action.payload,\r\n        checked: true,\r\n      },\r\n    }),\r\n    testmode: (state, action) => ({ ...state, guestlock: !action.payload }),\r\n  },\r\n});\r\n\r\nconst store = configureStore({ reducer: Store.reducer });\r\n\r\nexport const { logon, testmode } = Store.actions;\r\n\r\nexport default store;\r\n","export const Tradings = [\r\n  {\r\n    key: \"namuh\",\r\n    display: \"나무(NAMUH)\",\r\n    priority: 0,\r\n    color: \"#00a383\",\r\n  },\r\n  {\r\n    key: \"hankook\",\r\n    display: \"한국투자\",\r\n    priority: 1,\r\n    color: \"#104e81\",\r\n  },\r\n  {\r\n    key: \"mirae\",\r\n    display: \"미래에셋\",\r\n    priority: 2,\r\n    color: \"#e97f20\",\r\n  },\r\n  {\r\n    key: \"kb\",\r\n    display: \"KB증권\",\r\n    priority: 3,\r\n    color: \"#f2b200\",\r\n  },\r\n  {\r\n    key: \"shinhan\",\r\n    display: \"신한알파\",\r\n    priority: 4,\r\n    color: \"#2e62da\",\r\n  },\r\n  {\r\n    key: \"samsung\",\r\n    display: \"삼성증권\",\r\n    priority: 5,\r\n    color: \"#14279b\",\r\n  },\r\n  {\r\n    key: \"sk\",\r\n    display: \"SK증권\",\r\n    priority: 6,\r\n    color: \"#e31937\",\r\n  },\r\n];\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  DialogActions,\r\n  FormControl,\r\n  FormHelperText,\r\n  InputLabel,\r\n  makeStyles,\r\n  OutlinedInput,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    boxSizing: \"border-box\",\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    maxWidth: \"600px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: \"10px\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 2, 1),\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    color: \"#000\",\r\n  },\r\n  formInput: {\r\n    width: \"100%\",\r\n    marginBottom: \"10px\",\r\n  },\r\n}));\r\n\r\nfunction BackupStock({ swipeItem, onConfirm, onCancel }) {\r\n  const classes = useStyles();\r\n  const [price, setPrice] = useState(swipeItem.price);\r\n  const [quantity, setQuantity] = useState({\r\n    val: swipeItem.quantity,\r\n    exceed: false,\r\n    empty: swipeItem.quantity === 0,\r\n  });\r\n\r\n  const handlePriceChange = (event) => {\r\n    setPrice(event.target.value);\r\n  };\r\n  const handleQuantityChange = (event) => {\r\n    const changed = event.target.value;\r\n    setQuantity({\r\n      val: changed,\r\n      exceed: Number(changed) > Number(swipeItem.quantity),\r\n      empty: Number(changed) === 0,\r\n    });\r\n  };\r\n  const handleBackupItem = (event) => {\r\n    event.preventDefault();\r\n    if (quantity.exceed || quantity.empty) {\r\n      return;\r\n    }\r\n    onConfirm({\r\n      key: swipeItem.key,\r\n      price: swipeItem.price,\r\n      quantity: swipeItem.quantity,\r\n      indate: swipeItem.indate,\r\n      sellquantity: Number(quantity.val),\r\n      sellprice: Number(price),\r\n      backupAll: swipeItem.quantity === Number(quantity.val),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <h3 style={{ fontSize: \"20px\", margin: \"0 0 20px\" }}>매매 정보</h3>\r\n      <form>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel htmlFor=\"name-input\">종목명</InputLabel>\r\n          <OutlinedInput\r\n            id=\"name-input\"\r\n            value={swipeItem.key}\r\n            label=\"종목명\"\r\n            disabled={true}\r\n          />\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel htmlFor=\"price-input\">매매가</InputLabel>\r\n          <OutlinedInput\r\n            id=\"price-input\"\r\n            value={price}\r\n            onChange={handlePriceChange}\r\n            label=\"매매가\"\r\n            type=\"number\"\r\n            required={true}\r\n          />\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel\r\n            error={quantity.exceed || quantity.empty}\r\n            htmlFor=\"quantity-input\"\r\n          >\r\n            수량\r\n          </InputLabel>\r\n          <OutlinedInput\r\n            id=\"quantity-input\"\r\n            value={quantity.val}\r\n            onChange={handleQuantityChange}\r\n            label=\"수량\"\r\n            type=\"number\"\r\n            required={true}\r\n            error={quantity.exceed || quantity.empty}\r\n          />\r\n          {quantity.empty && (\r\n            <FormHelperText error id=\"accountId-error\">\r\n              매매수량을 입력해주세요.\r\n            </FormHelperText>\r\n          )}\r\n          {quantity.exceed && (\r\n            <FormHelperText error id=\"accountId-error\">\r\n              보유수량을 초과할 수 없습니다.\r\n            </FormHelperText>\r\n          )}\r\n        </FormControl>\r\n        <DialogActions>\r\n          <Button color=\"primary\" onClick={onCancel}>\r\n            취소\r\n          </Button>\r\n          <Button color=\"primary\" onClick={handleBackupItem} type=\"submit\">\r\n            확인\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BackupStock;\r\n","import { Modal } from \"@material-ui/core\";\r\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Tradings } from \"../../constants/Trading\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport BackupStock from \"../input/BackupStock\";\r\nimport \"./TableItem.css\";\r\n\r\nfunction TableItem({ tradingKey, item, handleItemSelect, store }) {\r\n  const { authenticate } = store;\r\n\r\n  const isMounted = useRef(false);\r\n  const [swipeItem, setSwipeItem] = useState(null);\r\n  const [backupItem, setBackupItem] = useState(null);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const getDateState = (item) => {\r\n    const date = new Date(item.indate);\r\n    date.setHours(9, 0, 0, 0);\r\n    const now = new Date();\r\n    const diff = (now.getTime() - date.getTime()) / (1000 * 3600 * 24);\r\n    let changeStyle = { color: \"gray\" };\r\n    let ddayState = 0;\r\n    if (diff >= 0 && diff < 1) {\r\n      changeStyle = { color: \"chartreuse\" };\r\n      ddayState = 1;\r\n    } else if (diff >= -2 && diff < 0) {\r\n      changeStyle = { color: \"red\" };\r\n      ddayState = 2;\r\n    } else if (diff < -2) {\r\n      changeStyle = { color: \"darkgreen\" };\r\n    }\r\n    const displayDate = date.getMonth() + 1 + \"/\" + date.getDate();\r\n\r\n    return { ddayState, changeStyle, displayDate };\r\n  };\r\n\r\n  useEffect(() => {\r\n    isMounted.current = true;\r\n    return () => {\r\n      isMounted.current = false;\r\n    };\r\n  }, []);\r\n  const { ddayState, changeStyle, displayDate } = getDateState(item);\r\n  const dbBackup = useCallback(() => {\r\n    if (!backupItem) {\r\n      return;\r\n    }\r\n    const rootRef = db.collection(\"user\").doc(authenticate.user);\r\n    const originRef = rootRef\r\n      .collection(\"trading\")\r\n      .doc(tradingKey)\r\n      .collection(\"items\")\r\n      .doc(backupItem.key);\r\n    const backupTradingRef = rootRef.collection(\"backup\").doc(tradingKey);\r\n    const backupRef = backupTradingRef.collection(\"items\").doc(backupItem.key);\r\n    const trading = Tradings.find((trading) => trading.key === tradingKey);\r\n    db.runTransaction((transaction) =>\r\n      transaction.get(backupRef).then((snapshot) => {\r\n        const data = snapshot.data();\r\n\r\n        // update backup db\r\n        transaction.set(backupTradingRef, {\r\n          display: trading.display,\r\n          priority: trading.priority,\r\n          color: trading.color,\r\n        });\r\n        if (snapshot.exists) {\r\n          const avePrice =\r\n            (data.sellprice * data.quantity +\r\n              backupItem.sellprice * backupItem.sellquantity) /\r\n            (data.quantity + backupItem.sellquantity);\r\n          transaction.update(backupRef, {\r\n            sellprice: Number(avePrice.toFixed(0)),\r\n            quantity: data.quantity + backupItem.sellquantity,\r\n            outdate: new Date().valueOf(),\r\n          });\r\n        } else {\r\n          transaction.set(backupRef, {\r\n            name: backupItem.key,\r\n            price: backupItem.price,\r\n            sellprice: backupItem.sellprice,\r\n            quantity: backupItem.sellquantity,\r\n            indate: backupItem.indate,\r\n            outdate: new Date().valueOf(),\r\n          });\r\n        }\r\n\r\n        // update origianl db\r\n        if (backupItem.backupAll) {\r\n          transaction.delete(originRef);\r\n        } else {\r\n          transaction.update(originRef, {\r\n            quantity: backupItem.quantity - backupItem.sellquantity,\r\n          });\r\n        }\r\n      })\r\n    )\r\n      .then(() => {\r\n        console.log(\"Transaction successfully committed!\");\r\n        if (isMounted.current) {\r\n          setBackupItem(null);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Transaction failed: \", error);\r\n        if (isMounted.current) {\r\n          setBackupItem(null);\r\n        }\r\n      });\r\n  }, [tradingKey, authenticate, backupItem]);\r\n\r\n  const getX = (e) => {\r\n    var x = e.clientX;\r\n    if (!x) {\r\n      x = e.touches[0].screenX;\r\n    }\r\n    return Number(x.toFixed());\r\n  };\r\n\r\n  const handleItemClick = useCallback(\r\n    (e) => {\r\n      if (Math.abs(getX(e) - swipeItem?.startX) > 10) {\r\n        return;\r\n      }\r\n      e.currentTarget.setAttribute(\"class\", \"tr selected\");\r\n      handleItemSelect({\r\n        target: e.currentTarget,\r\n        tradingKey,\r\n      });\r\n      e.stopPropagation();\r\n    },\r\n    [tradingKey, handleItemSelect, swipeItem]\r\n  );\r\n  const handleSwipeStart = useCallback((e) => {\r\n    setSwipeItem({\r\n      target: e.currentTarget,\r\n      key: e.currentTarget.children[0].innerText,\r\n      price: Number(e.currentTarget.children[1].textContent.replace(\",\", \"\")),\r\n      quantity: Number(e.currentTarget.children[2].textContent),\r\n      indate: Number(e.currentTarget.children[3].getAttribute(\"originaldate\")),\r\n      startX: getX(e),\r\n      dx: getX(e),\r\n    });\r\n  }, []);\r\n  const handleSwipeMove = useCallback(\r\n    (e) => {\r\n      if (!swipeItem) {\r\n        return;\r\n      }\r\n      let dx = getX(e);\r\n      let leftonly = swipeItem.startX > dx ? dx : swipeItem.startX;\r\n      setSwipeItem({ ...swipeItem, dx: leftonly });\r\n    },\r\n    [swipeItem]\r\n  );\r\n  const handleSwipeEnd = useCallback(\r\n    (e) => {\r\n      if (!swipeItem) {\r\n        return;\r\n      }\r\n      if (swipeItem.startX - swipeItem.dx > 100) {\r\n        setOpen(true);\r\n      } else {\r\n        setSwipeItem(null);\r\n      }\r\n    },\r\n    [swipeItem]\r\n  );\r\n  const handleAnimationEnd = useCallback(\r\n    (e) => {\r\n      if (backupItem.backupAll && e.animationName === \"hiderow\") {\r\n        e.currentTarget.parentElement.setAttribute(\"style\", \"display: none\");\r\n        dbBackup();\r\n        setSwipeItem(null);\r\n      } else if (!backupItem.backupAll && e.animationName === \"swipeout\") {\r\n        e.currentTarget.setAttribute(\"class\", \"tr\");\r\n        dbBackup();\r\n        setSwipeItem(null);\r\n      }\r\n    },\r\n    [backupItem, dbBackup]\r\n  );\r\n\r\n  const handleBackupConfirm = useCallback(\r\n    (backupInfo) => {\r\n      setBackupItem(backupInfo);\r\n      setOpen(false);\r\n      if (swipeItem.quantity === backupInfo.quantity) {\r\n        swipeItem.target.setAttribute(\"class\", \"tr swipeouthide\");\r\n      } else {\r\n        swipeItem.target.setAttribute(\"class\", \"tr swipeout\");\r\n      }\r\n    },\r\n    [swipeItem]\r\n  );\r\n\r\n  const handleBackupCancel = useCallback(() => {\r\n    setOpen(false);\r\n    setSwipeItem(null);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"tableitem\">\r\n      <div className=\"tr-bg\">보관</div>\r\n      <div\r\n        className=\"tr\"\r\n        onClick={handleItemClick}\r\n        onTouchStart={handleSwipeStart}\r\n        onTouchMove={handleSwipeMove}\r\n        onTouchEnd={handleSwipeEnd}\r\n        onMouseDown={handleSwipeStart}\r\n        onMouseMove={handleSwipeMove}\r\n        onMouseUpCapture={handleSwipeEnd}\r\n        onAnimationEnd={handleAnimationEnd}\r\n        style={\r\n          swipeItem?.key === item.name\r\n            ? {\r\n                left: `${swipeItem.dx - swipeItem.startX}px`,\r\n              }\r\n            : {}\r\n        }\r\n      >\r\n        <div className=\"item stock_name\">{item.name}</div>\r\n        <div className=\"item stock_price\">\r\n          {String(item.price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n        </div>\r\n        <div className=\"item stock_quantity\">{item.quantity}</div>\r\n        <div\r\n          className=\"item stock_indate\"\r\n          style={changeStyle}\r\n          originaldate={item.indate}\r\n        >\r\n          <span className=\"main_text\">{displayDate}</span>\r\n          {ddayState > 0 && (\r\n            <span className=\"sub_text\" style={{ color: \"inherit\" }}>\r\n              {ddayState === 1 ? \"입고완료\" : \"입고예정\"}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <Modal\r\n        open={open}\r\n        onClose={() => setOpen(false)}\r\n        aria-labelledby=\"add-stock\"\r\n        aria-describedby=\"add-stock\"\r\n      >\r\n        <div>\r\n          <BackupStock\r\n            swipeItem={swipeItem}\r\n            onConfirm={handleBackupConfirm}\r\n            onCancel={handleBackupCancel}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\nexport default connect(mapStateToProps, null)(React.memo(TableItem));\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport \"./StockTable.css\";\r\nimport TableItem from \"./TableItem\";\r\n\r\nfunction StockTable({ trading, store, handleItemSelect }) {\r\n  const { key: tradingKey, data } = trading;\r\n  const { color, display } = data;\r\n  const { authenticate } = store;\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = db\r\n      .collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(\"trading\")\r\n      .doc(tradingKey)\r\n      .collection(\"items\")\r\n      .orderBy(\"indate\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        if (snapshot.size > 0) {\r\n          setItems(snapshot.docs.map((doc) => doc.data()));\r\n        } else {\r\n          db.collection(\"user\")\r\n            .doc(authenticate.user)\r\n            .collection(\"trading\")\r\n            .doc(tradingKey)\r\n            .delete();\r\n        }\r\n      });\r\n    return unsubscribe;\r\n  }, [authenticate, tradingKey]);\r\n  return (\r\n    <div className=\"stocktable\">\r\n      <div className=\"table_title\" style={{ color: color }}>\r\n        <strong>{display}</strong>\r\n      </div>\r\n      <div className=\"table\">\r\n        <div className=\"thead\">\r\n          <div className=\"tr\">\r\n            <div className=\"stock_name\">종목명</div>\r\n            <div className=\"stock_price\">단가</div>\r\n            <div className=\"stock_quantity\">수량</div>\r\n            <div className=\"stock_indate\">상장일</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"tbody\">\r\n          {items.map((item) => (\r\n            <TableItem\r\n              key={item.name}\r\n              tradingKey={tradingKey}\r\n              item={item}\r\n              handleItemSelect={handleItemSelect}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(StockTable);\r\n","import React, { useState } from \"react\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\nimport {\r\n  Button,\r\n  DialogActions,\r\n  FormControl,\r\n  InputLabel,\r\n  makeStyles,\r\n  MenuItem,\r\n  OutlinedInput,\r\n  Select,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  KeyboardDatePicker,\r\n  MuiPickersUtilsProvider,\r\n} from \"@material-ui/pickers\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport { connect } from \"react-redux\";\r\nimport { Tradings } from \"../../constants/Trading\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    boxSizing: \"border-box\",\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    maxWidth: \"600px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: \"10px\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 2, 1),\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(3),\r\n  },\r\n  formTrading: {\r\n    minWidth: 120,\r\n  },\r\n  formInput: {\r\n    width: \"100%\",\r\n    marginBottom: \"10px\",\r\n  },\r\n}));\r\n\r\nfunction AddStock({ setOpen, store, selectedItem, handleItemSelect }) {\r\n  let sIndex = 0;\r\n  let sName = \"\";\r\n  let sPrice = \"\";\r\n  let sQuantity = \"\";\r\n  let sDate = new Date();\r\n  if (selectedItem) {\r\n    Tradings.forEach((trading, ind) => {\r\n      if (trading.key === selectedItem.tradingKey) {\r\n        sIndex = ind;\r\n      }\r\n    });\r\n    sName = selectedItem.target.children[0].textContent;\r\n    sPrice = selectedItem.target.children[1].textContent.replace(\",\", \"\");\r\n    sQuantity = selectedItem.target.children[2].textContent;\r\n    sDate = new Date(\r\n      Number(selectedItem.target.children[3].getAttribute(\"originaldate\"))\r\n    );\r\n  }\r\n\r\n  const classes = useStyles();\r\n  const [tradingIndex, setTradingIndex] = useState(sIndex);\r\n  const [name, setName] = useState(sName);\r\n  const [price, setPrice] = useState(sPrice);\r\n  const [quantity, setQuantity] = useState(sQuantity);\r\n  const [date, setDate] = useState(sDate);\r\n\r\n  const { authenticate } = store;\r\n  const isModified = !!selectedItem;\r\n\r\n  const handleChangeTrading = (event) => {\r\n    setTradingIndex(event.target.value);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    setName(event.target.value);\r\n  };\r\n  const handlePriceChange = (event) => {\r\n    setPrice(event.target.value);\r\n  };\r\n  const handleQuantityChange = (event) => {\r\n    setQuantity(event.target.value);\r\n  };\r\n  const handleDateChange = (date) => {\r\n    setDate(date);\r\n  };\r\n  const addItem = (event) => {\r\n    event.preventDefault();\r\n    if (store.guestlock && authenticate.user === \"guest@guest.com\") {\r\n      alert(\"please sign-in with private account\");\r\n      setOpen(false);\r\n      handleItemSelect(null);\r\n      return;\r\n    }\r\n    const trading = Tradings[tradingIndex];\r\n    const dbRef = db\r\n      .collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(\"trading\");\r\n    dbRef.doc(trading.key).set({\r\n      display: trading.display,\r\n      priority: trading.priority,\r\n      color: trading.color,\r\n    });\r\n    dbRef\r\n      .doc(trading.key)\r\n      .collection(\"items\")\r\n      .doc(name)\r\n      .set({\r\n        name: name,\r\n        price: Number(price),\r\n        quantity: Number(quantity),\r\n        indate: date.valueOf(),\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error adding document: \", error);\r\n      });\r\n    setOpen(false);\r\n    handleItemSelect(null);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <form>\r\n        <FormControl className={classes.formTrading}>\r\n          <InputLabel id=\"trading-select-label\">증권계좌</InputLabel>\r\n          <Select\r\n            labelId=\"trading-select-label\"\r\n            id=\"trading-select\"\r\n            value={tradingIndex}\r\n            onChange={handleChangeTrading}\r\n            className={classes.selectEmpty}\r\n            required={true}\r\n            disabled={isModified}\r\n          >\r\n            {Tradings.map((trading, index) => (\r\n              <MenuItem key={trading.key} value={index}>\r\n                {trading.display}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel htmlFor=\"name-input\">종목명</InputLabel>\r\n          <OutlinedInput\r\n            id=\"name-input\"\r\n            value={name}\r\n            onChange={handleNameChange}\r\n            label=\"종목명\"\r\n            required={true}\r\n            disabled={isModified}\r\n          />\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel htmlFor=\"price-input\">단가</InputLabel>\r\n          <OutlinedInput\r\n            id=\"price-input\"\r\n            value={price}\r\n            onChange={handlePriceChange}\r\n            label=\"단가\"\r\n            type=\"number\"\r\n          />\r\n        </FormControl>\r\n        <FormControl variant=\"outlined\" className={classes.formInput}>\r\n          <InputLabel htmlFor=\"quantity-input\">수량</InputLabel>\r\n          <OutlinedInput\r\n            id=\"quantity-input\"\r\n            value={quantity}\r\n            onChange={handleQuantityChange}\r\n            label=\"수량\"\r\n            type=\"number\"\r\n          />\r\n        </FormControl>\r\n        <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n          <KeyboardDatePicker\r\n            disableToolbar\r\n            variant=\"inline\"\r\n            format=\"MM/dd/yyyy\"\r\n            margin=\"normal\"\r\n            id=\"date-picker-inline\"\r\n            label=\"상장일(Month/Day/Year)\"\r\n            value={date}\r\n            onChange={handleDateChange}\r\n            KeyboardButtonProps={{\r\n              \"aria-label\": \"change date\",\r\n            }}\r\n            PopoverProps={{\r\n              anchorOrigin: { vertical: \"top\", horizontal: \"right\" },\r\n              transformOrigin: { vertical: \"bottom\", horizontal: \"right\" },\r\n            }}\r\n            className={classes.formInput}\r\n          />\r\n        </MuiPickersUtilsProvider>\r\n        <DialogActions>\r\n          <Button color=\"primary\" onClick={() => setOpen(false)}>\r\n            취소\r\n          </Button>\r\n          <Button color=\"primary\" onClick={addItem} type=\"submit\" autoFocus>\r\n            {selectedItem ? \"수정\" : \"추가\"}\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(AddStock);\r\n","import React from \"react\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport { Button, DialogActions, makeStyles } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    boxSizing: \"border-box\",\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    maxWidth: \"600px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: \"10px\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 3, 1),\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    color: \"black\",\r\n  },\r\n}));\r\n\r\nfunction DeleteStock({\r\n  setOpen,\r\n  store,\r\n  selectedItem,\r\n  handleItemSelect,\r\n  backup,\r\n}) {\r\n  if (!selectedItem) {\r\n    setOpen(false);\r\n  }\r\n  const name = selectedItem?.target.children[0].innerText;\r\n\r\n  const classes = useStyles();\r\n  const { authenticate } = store;\r\n\r\n  const deleteItem = () => {\r\n    if (store.guestlock && authenticate.user === \"guest@guest.com\") {\r\n      alert(\"please sign-in with private account\");\r\n      setOpen(false);\r\n      handleItemSelect(null);\r\n      return;\r\n    }\r\n    db.collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(backup ? \"backup\" : \"trading\")\r\n      .doc(selectedItem.tradingKey)\r\n      .collection(\"items\")\r\n      .doc(name)\r\n      .delete()\r\n      .catch((error) => {\r\n        console.error(\"Error removing document: \", error);\r\n      });\r\n    setOpen(false);\r\n    handleItemSelect(null);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <h3 id=\"simple-modal-title\">삭제</h3>\r\n      <div style={{ marginBottom: \"20px\" }}>삭제 하시겠습니까?</div>\r\n      <DialogActions>\r\n        <Button color=\"primary\" onClick={() => setOpen(false)}>\r\n          취소\r\n        </Button>\r\n        <Button color=\"primary\" onClick={deleteItem} type=\"submit\" autoFocus>\r\n          삭제\r\n        </Button>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(DeleteStock);\r\n","import React from \"react\";\r\nimport ReactLoading from \"react-loading\";\r\nimport \"./LoadingTool.css\";\r\n\r\nfunction LoadingTool() {\r\n  return (\r\n    <div className=\"loading-area\">\r\n      <ReactLoading\r\n        type={\"spinningBubbles\"}\r\n        color={\"gray\"}\r\n        height={100}\r\n        width={100}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoadingTool;\r\n","import \"./Main.css\";\r\nimport React, { useCallback, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { logon } from \"../store/Store\";\r\nimport StockTable from \"../components/table/StockTable\";\r\nimport AddStock from \"../components/input/AddStock\";\r\nimport { auth, db } from \"../utils/firebase\";\r\n\r\nimport { Modal, Fab, makeStyles } from \"@material-ui/core\";\r\nimport HistoryIcon from \"@material-ui/icons/History\";\r\nimport ExitToAppOutlinedIcon from \"@material-ui/icons/ExitToAppOutlined\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { green } from \"@material-ui/core/colors\";\r\nimport DeleteStock from \"../components/input/DeleteStock\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoadingTool from \"./LoadingTool\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  fab: {},\r\n  fabEdit: {\r\n    color: theme.palette.common.white,\r\n    backgroundColor: green[500],\r\n    \"&:hover\": {\r\n      backgroundColor: green[600],\r\n    },\r\n  },\r\n  icon: {\r\n    color: \"gray\",\r\n    fontSize: 30,\r\n    position: \"absolute\",\r\n    left: \"20px\",\r\n    top: \"50%\",\r\n    transform: \"translateY(-50%)\",\r\n  },\r\n}));\r\n\r\nfunction Main({ history, store, setUser, setLoading }) {\r\n  console.log(\"Main START\");\r\n  const classes = useStyles();\r\n  const { authenticate } = store;\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const [openDel, setOpenDel] = useState(false);\r\n  const [tradings, setTradings] = useState([]);\r\n  const [selectedItem, setSelectedItem] = useState(undefined);\r\n  const [reloading, setReloading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log(\"Main RENDERED\");\r\n    if (authenticate.checked && !authenticate.isAuth) {\r\n      console.log(\"Main goRoot!!\");\r\n      history.replace(\"/\");\r\n      return;\r\n    }\r\n\r\n    const unsubscribe = db\r\n      .collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(\"trading\")\r\n      .orderBy(\"priority\", \"asc\")\r\n      .onSnapshot((snapshot) => {\r\n        setTradings(\r\n          snapshot.docs.map((doc) => ({\r\n            key: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n        setTimeout(() => {\r\n          setLoading(false);\r\n          setReloading(false);\r\n        }, 500);\r\n      });\r\n    return unsubscribe;\r\n  }, [authenticate, history, setLoading]);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n  const handleOpenDel = () => {\r\n    setOpenDel(true);\r\n  };\r\n  const handleCloseDel = () => {\r\n    setOpenDel(false);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    auth.signOut().then(() => {\r\n      setUser(undefined);\r\n    });\r\n  };\r\n\r\n  const handleItemSelect = useCallback(\r\n    (item) => {\r\n      // clear history\r\n      selectedItem?.target.setAttribute(\"class\", \"tr\");\r\n      if (selectedItem?.target !== item?.target) {\r\n        setSelectedItem(item);\r\n      } else {\r\n        setSelectedItem(null);\r\n      }\r\n    },\r\n    [selectedItem]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <header>\r\n        <div className=\"header_main\">\r\n          <Link to=\"/backup\">\r\n            <HistoryIcon className={classes.icon} />\r\n          </Link>\r\n          <Link to=\"/ipolist\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n            <div className=\"title\">\r\n              <span className=\"main-title\">Stock Manager</span>\r\n              <span className=\"sub-title\">\r\n                {\"@\" + authenticate.user?.split(\"@\")[0]}\r\n              </span>\r\n            </div>\r\n          </Link>\r\n          <div className=\"logout\" onClick={handleLogout}>\r\n            <span>Logout</span>\r\n            <ExitToAppOutlinedIcon />\r\n          </div>\r\n        </div>\r\n      </header>\r\n      {reloading && <LoadingTool />}\r\n      <div\r\n        className=\"main\"\r\n        onClick={() => {\r\n          handleItemSelect(null);\r\n        }}\r\n      >\r\n        {tradings.map((trading) => (\r\n          <StockTable\r\n            key={trading.key}\r\n            trading={trading}\r\n            handleItemSelect={handleItemSelect}\r\n          />\r\n        ))}\r\n      </div>\r\n      <div\r\n        className={\r\n          selectedItem\r\n            ? \"fab-area unselect fadeout\"\r\n            : \"fab-area unselect fadein\"\r\n        }\r\n      >\r\n        <Fab\r\n          className={classes.fab}\r\n          color=\"primary\"\r\n          aria-label=\"add\"\r\n          onClick={handleOpen}\r\n        >\r\n          <AddIcon />\r\n        </Fab>\r\n      </div>\r\n      {selectedItem !== undefined && (\r\n        <div\r\n          className={\r\n            selectedItem\r\n              ? \"fab-area select slidein\"\r\n              : \"fab-area select slideout\"\r\n          }\r\n        >\r\n          <Fab\r\n            className={classes.fabEdit}\r\n            aria-label=\"edit\"\r\n            onClick={handleOpen}\r\n          >\r\n            <EditIcon />\r\n          </Fab>\r\n          <Fab\r\n            className={classes.fab}\r\n            color=\"secondary\"\r\n            aria-label=\"delete\"\r\n            onClick={handleOpenDel}\r\n          >\r\n            <DeleteIcon />\r\n          </Fab>\r\n        </div>\r\n      )}\r\n      <Modal\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"add-stock\"\r\n        aria-describedby=\"add-stock\"\r\n      >\r\n        <div>\r\n          <AddStock\r\n            setOpen={setOpen}\r\n            selectedItem={selectedItem}\r\n            handleItemSelect={handleItemSelect}\r\n          />\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        open={openDel}\r\n        onClose={handleCloseDel}\r\n        aria-labelledby=\"del-stock\"\r\n        aria-describedby=\"del-stock\"\r\n      >\r\n        <div>\r\n          <DeleteStock\r\n            setOpen={setOpenDel}\r\n            selectedItem={selectedItem}\r\n            handleItemSelect={handleItemSelect}\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setUser: (user) => dispatch(logon(user)),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Main);\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport \"./HistoryTable.css\";\r\n\r\nfunction HistoryTable({ trading, store, handleItemSelect, setFinance }) {\r\n  const { key: tradingKey, data } = trading;\r\n  const { color, display } = data;\r\n  const { authenticate } = store;\r\n\r\n  const [items, setItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = db\r\n      .collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(\"backup\")\r\n      .doc(tradingKey)\r\n      .collection(\"items\")\r\n      .orderBy(\"outdate\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        if (snapshot.size > 0) {\r\n          let priceSum = 0;\r\n          let sellpriceSum = 0;\r\n          setItems(\r\n            snapshot.docs.map((doc) => {\r\n              const data = doc.data();\r\n              priceSum += data.price * data.quantity;\r\n              sellpriceSum += data.sellprice * data.quantity;\r\n              return data;\r\n            })\r\n          );\r\n          setFinance((finance) => ({\r\n            ...finance,\r\n            ...{\r\n              [tradingKey]: { price: priceSum, sellprice: sellpriceSum },\r\n            },\r\n          }));\r\n        } else {\r\n          db.collection(\"user\")\r\n            .doc(authenticate.user)\r\n            .collection(\"backup\")\r\n            .doc(tradingKey)\r\n            .delete();\r\n        }\r\n      });\r\n    return unsubscribe;\r\n  }, [authenticate, tradingKey, setFinance]);\r\n\r\n  const handleItemClick = useCallback(\r\n    (e) => {\r\n      e.currentTarget.setAttribute(\"class\", \"tr selected\");\r\n      handleItemSelect({\r\n        target: e.currentTarget,\r\n        tradingKey,\r\n      });\r\n      e.stopPropagation();\r\n    },\r\n    [tradingKey, handleItemSelect]\r\n  );\r\n  return (\r\n    <div className=\"historytable\">\r\n      <div className=\"table_title\" style={{ color: color }}>\r\n        <strong>{display}</strong>\r\n      </div>\r\n      <div className=\"table\">\r\n        <div className=\"thead\">\r\n          <div className=\"tr\">\r\n            <div className=\"head stock_name\">종목명</div>\r\n            <div className=\"head stock_profit\">\r\n              <span className=\"main_text\">평가손익</span>\r\n              <span className=\"sub_text\">손익률</span>\r\n            </div>\r\n            <div className=\"head stock_quantity\">수량</div>\r\n            <div className=\"head stock_price\">\r\n              <span className=\"main_text\">매매가</span>\r\n              <span className=\"sub_text\">매입가</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"tbody\">\r\n          {items.map((item) => {\r\n            const { sellprice, price, quantity } = item;\r\n            const profit = (sellprice - price) * quantity;\r\n            const profitRatio = ((sellprice - price) / price) * 100;\r\n            let profitColor = { color: \"white\" };\r\n            if (profit > 0) {\r\n              profitColor = { color: \"#d24f45\" };\r\n            } else if (profit < 0) {\r\n              profitColor = { color: \"#1261c4\" };\r\n            }\r\n            return (\r\n              <div className=\"tr\" onClick={handleItemClick} key={item.name}>\r\n                <div className=\"item stock_name\">{item.name}</div>\r\n                <div className=\"item stock_profit\" style={profitColor}>\r\n                  <span className=\"main_text\">\r\n                    {profit.toFixed(0).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n                  </span>\r\n                  <span className=\"sub_text\">\r\n                    {profitRatio.toFixed(2) + \" %\"}\r\n                  </span>\r\n                </div>\r\n                <div className=\"item stock_quantity\">{quantity}</div>\r\n                <div className=\"item stock_price\">\r\n                  <span className=\"main_text\" style={profitColor}>\r\n                    {String(sellprice).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n                  </span>\r\n                  <span className=\"sub_text\" style={{ color: \"gray\" }}>\r\n                    {String(price).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(HistoryTable);\r\n","import React from \"react\";\r\nimport { db } from \"../../utils/firebase\";\r\nimport { Button, DialogActions, makeStyles } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\nimport { Tradings } from \"../../constants/Trading\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    boxSizing: \"border-box\",\r\n    position: \"absolute\",\r\n    width: \"80%\",\r\n    maxWidth: \"600px\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    borderRadius: \"10px\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(2, 3, 1),\r\n    top: \"50%\",\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -50%)\",\r\n    color: \"black\",\r\n  },\r\n}));\r\n\r\nfunction RestoreStock({ setOpen, store, selectedItem, handleItemSelect }) {\r\n  if (!selectedItem) {\r\n    setOpen(false);\r\n  }\r\n\r\n  const classes = useStyles();\r\n  const { authenticate } = store;\r\n\r\n  const restoreItem = () => {\r\n    if (store.guestlock && authenticate.user === \"guest@guest.com\") {\r\n      alert(\"please sign-in with private account\");\r\n      setOpen(false);\r\n      handleItemSelect(null);\r\n      return;\r\n    }\r\n\r\n    const tradingKey = selectedItem.tradingKey;\r\n    const name = selectedItem.target.children[0].textContent;\r\n    const rootRef = db.collection(\"user\").doc(authenticate.user);\r\n    const tradingRef = rootRef.collection(\"trading\").doc(tradingKey);\r\n    const originRef = tradingRef.collection(\"items\").doc(name);\r\n    const backupRef = rootRef\r\n      .collection(\"backup\")\r\n      .doc(tradingKey)\r\n      .collection(\"items\")\r\n      .doc(name);\r\n    const trading = Tradings.find((trading) => trading.key === tradingKey);\r\n\r\n    db.runTransaction((transaction) =>\r\n      transaction.get(backupRef).then((snapshot) => {\r\n        const data = snapshot.data();\r\n        transaction.delete(backupRef);\r\n        return data;\r\n      })\r\n    )\r\n      .then((data) => {\r\n        console.log(\"Transaction successfully committed!\");\r\n        db.runTransaction((postTransaction) =>\r\n          postTransaction.get(originRef).then((postSanpshot) => {\r\n            const originData = postSanpshot.data();\r\n\r\n            postTransaction.set(tradingRef, {\r\n              display: trading.display,\r\n              priority: trading.priority,\r\n              color: trading.color,\r\n            });\r\n            if (postSanpshot.exists) {\r\n              postTransaction.update(originRef, {\r\n                quantity: originData.quantity + data.quantity,\r\n              });\r\n            } else {\r\n              const { name, price, quantity, indate } = data;\r\n              postTransaction.set(originRef, {\r\n                name,\r\n                price,\r\n                quantity,\r\n                indate,\r\n              });\r\n            }\r\n          })\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Transaction failed: \", error);\r\n      });\r\n    setOpen(false);\r\n    handleItemSelect(null);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.paper}>\r\n      <h3 id=\"simple-modal-title\">복원</h3>\r\n      <div style={{ marginBottom: \"20px\" }}>복원 하시겠습니까?</div>\r\n      <DialogActions>\r\n        <Button color=\"primary\" onClick={() => setOpen(false)}>\r\n          취소\r\n        </Button>\r\n        <Button color=\"primary\" onClick={restoreItem} type=\"submit\" autoFocus>\r\n          복원\r\n        </Button>\r\n      </DialogActions>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(RestoreStock);\r\n","import React, { useMemo } from \"react\";\r\nimport \"./ProfitTable.css\";\r\n\r\nfunction ProfitTable({ finance }) {\r\n  const { profit, profitRatio } = useMemo(() => {\r\n    let priceSum = 0;\r\n    let sellpriceSum = 0;\r\n    for (let key in finance) {\r\n      const { price, sellprice } = finance[key];\r\n      priceSum += price;\r\n      sellpriceSum += sellprice;\r\n    }\r\n    return {\r\n      profit: sellpriceSum - priceSum,\r\n      profitRatio: ((sellpriceSum - priceSum) / priceSum) * 100,\r\n    };\r\n  }, [finance]);\r\n\r\n  let profitColor = { color: \"white\" };\r\n  if (profit > 0) {\r\n    profitColor = { color: \"#d24f45\" };\r\n  } else if (profit < 0) {\r\n    profitColor = { color: \"#d24f45\" };\r\n  }\r\n  return (\r\n    <div className=\"profittable\">\r\n      <div className=\"tr\">\r\n        <div className=\"th\">총평가손익</div>\r\n        <div className=\"td\" style={profitColor}>\r\n          {String(profit).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\")}\r\n        </div>\r\n      </div>\r\n      <div className=\"tr\">\r\n        <div className=\"th\">총평가수익률</div>\r\n        <div className=\"td\" style={profitColor}>\r\n          {profitRatio.toFixed(2)}%\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfitTable;\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport \"./Backup.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { db } from \"../utils/firebase\";\r\nimport HistoryTable from \"../components/table/HistoryTable\";\r\nimport ArrowBackIosIcon from \"@material-ui/icons/ArrowBackIos\";\r\nimport CloudOffSharpIcon from \"@material-ui/icons/CloudOffSharp\";\r\nimport RestoreFromTrashIcon from \"@material-ui/icons/RestoreFromTrash\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport { Fab, makeStyles, Modal } from \"@material-ui/core\";\r\nimport { Link } from \"react-router-dom\";\r\nimport DeleteStock from \"../components/input/DeleteStock\";\r\nimport RestoreStock from \"../components/input/RestoreStock\";\r\nimport LoadingTool from \"./LoadingTool\";\r\nimport ProfitTable from \"../components/table/ProfitTable\";\r\n\r\nconst useStyles = makeStyles({\r\n  fab: {},\r\n  icon: {\r\n    fontSize: 30,\r\n    position: \"absolute\",\r\n    left: \"20px\",\r\n    top: \"50%\",\r\n    transform: \"translateY(-50%)\",\r\n  },\r\n  empty: {\r\n    fill: \"gray\",\r\n    fontSize: 100,\r\n  },\r\n});\r\n\r\nfunction Backup({ history, store, setLoading }) {\r\n  console.log(\"Backup START\");\r\n  const classes = useStyles();\r\n  const { authenticate } = store;\r\n\r\n  const [tradings, setTradings] = useState([]);\r\n  const [openRestore, setOpenRestore] = useState(false);\r\n  const [openDel, setOpenDel] = useState(false);\r\n  const [selectedItem, setSelectedItem] = useState(undefined);\r\n  const [reloading, setReloading] = useState(true);\r\n  const [finance, setFinance] = useState({});\r\n\r\n  useEffect(() => {\r\n    console.log(\"Backup RENDERED\");\r\n    if (authenticate.checked && !authenticate.isAuth) {\r\n      console.log(\"Backup goRoot!!\");\r\n      history.replace(\"/\");\r\n      return;\r\n    }\r\n\r\n    const unsubscribe = db\r\n      .collection(\"user\")\r\n      .doc(authenticate.user)\r\n      .collection(\"backup\")\r\n      .orderBy(\"priority\", \"asc\")\r\n      .onSnapshot((snapshot) => {\r\n        setTradings(\r\n          snapshot.docs.map((doc) => ({\r\n            key: doc.id,\r\n            data: doc.data(),\r\n          }))\r\n        );\r\n        setTimeout(() => {\r\n          setLoading(false);\r\n          setReloading(false);\r\n        }, 500);\r\n      });\r\n    return unsubscribe;\r\n  }, [authenticate, history, setLoading]);\r\n\r\n  const handleOpenRestore = () => {\r\n    setOpenRestore(true);\r\n  };\r\n  const handleCloseRestore = () => {\r\n    setOpenRestore(false);\r\n  };\r\n  const handleOpenDel = () => {\r\n    setOpenDel(true);\r\n  };\r\n  const handleCloseDel = () => {\r\n    setOpenDel(false);\r\n  };\r\n  const handleItemSelect = useCallback(\r\n    (item) => {\r\n      // clear history\r\n      selectedItem?.target.setAttribute(\"class\", \"tr\");\r\n      if (selectedItem?.target !== item?.target) {\r\n        setSelectedItem(item);\r\n      } else {\r\n        setSelectedItem(null);\r\n      }\r\n    },\r\n    [selectedItem]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <header>\r\n        <div className=\"header_backup\">\r\n          <Link to=\"/main\">\r\n            <ArrowBackIosIcon className={classes.icon} />\r\n          </Link>\r\n          <div className=\"title\">\r\n            <span className=\"main-title\">매매손익</span>\r\n          </div>\r\n        </div>\r\n      </header>\r\n      {reloading && <LoadingTool />}\r\n      <div\r\n        className=\"backup\"\r\n        onClick={() => {\r\n          handleItemSelect(null);\r\n        }}\r\n      >\r\n        {tradings.length === 0 && (\r\n          <div className=\"backup-empty\">\r\n            <CloudOffSharpIcon className={classes.empty} />\r\n            <p>백업된 자료가 없습니다.</p>\r\n          </div>\r\n        )}\r\n        {tradings.length > 0 && <ProfitTable finance={finance} />}\r\n        {tradings.map((trading) => (\r\n          <HistoryTable\r\n            key={trading.key}\r\n            trading={trading}\r\n            handleItemSelect={handleItemSelect}\r\n            setFinance={setFinance}\r\n          />\r\n        ))}\r\n      </div>\r\n      {selectedItem !== undefined && (\r\n        <div\r\n          className={\r\n            selectedItem\r\n              ? \"fab-area select slidein\"\r\n              : \"fab-area select slideout\"\r\n          }\r\n        >\r\n          <Fab\r\n            className={classes.fab}\r\n            color=\"primary\"\r\n            aria-label=\"restore\"\r\n            onClick={handleOpenRestore}\r\n          >\r\n            <RestoreFromTrashIcon />\r\n          </Fab>\r\n          <Fab\r\n            className={classes.fab}\r\n            color=\"secondary\"\r\n            aria-label=\"delete\"\r\n            onClick={handleOpenDel}\r\n          >\r\n            <DeleteIcon />\r\n          </Fab>\r\n        </div>\r\n      )}\r\n      <Modal\r\n        open={openRestore}\r\n        onClose={handleCloseRestore}\r\n        aria-labelledby=\"restore-stock\"\r\n        aria-describedby=\"restore-stock\"\r\n      >\r\n        <div>\r\n          <RestoreStock\r\n            setOpen={setOpenRestore}\r\n            selectedItem={selectedItem}\r\n            handleItemSelect={handleItemSelect}\r\n            backup\r\n          />\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        open={openDel}\r\n        onClose={handleCloseDel}\r\n        aria-labelledby=\"del-stock\"\r\n        aria-describedby=\"del-stock\"\r\n      >\r\n        <div>\r\n          <DeleteStock\r\n            setOpen={setOpenDel}\r\n            selectedItem={selectedItem}\r\n            handleItemSelect={handleItemSelect}\r\n            backup\r\n          />\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(Backup);\r\n","import { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { HashRouter, Redirect, Route, Switch } from \"react-router-dom\";\r\nimport Login from \"./pages/Login\";\r\nimport Main from \"./pages/Main\";\r\nimport { logon } from \"./store/Store\";\r\nimport { auth } from \"./utils/firebase\";\r\nimport LoadingTool from \"./pages/LoadingTool\";\r\nimport Backup from \"./pages/Backup\";\r\n\r\nfunction App({ store, setUser }) {\r\n  const { authenticate } = store;\r\n  console.log(\"App START\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    console.log(\"App RENDERED - registering\");\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      console.log(\"App onAuthStateChanged\", user);\r\n      setUser(user?.email);\r\n      if (!user) {\r\n        setTimeout(() => {\r\n          setLoading(false);\r\n        }, 500);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, [setUser]);\r\n\r\n  return (\r\n    <HashRouter>\r\n      {loading && <LoadingTool />}\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          render={() =>\r\n            authenticate.isAuth ? (\r\n              <Redirect to=\"/main\" />\r\n            ) : (\r\n              <Redirect to=\"/login\" />\r\n            )\r\n          }\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/login\"\r\n          render={(props) => <Login {...props} setLoading={setLoading} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/main\"\r\n          render={(props) => <Main {...props} setLoading={setLoading} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/backup\"\r\n          render={(props) => <Backup {...props} setLoading={setLoading} />}\r\n        />\r\n        <Route\r\n          exact\r\n          path=\"/ipolist\"\r\n          component={() => {\r\n            window.location.href = \"http://sereon.synology.me:38888/po/IPOlist\";\r\n            return null;\r\n          }}\r\n        />\r\n      </Switch>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { store: state };\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    setUser: (user) => dispatch(logon(user)),\r\n  };\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n// export default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport store from \"./store/Store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}