(this["webpackJsonpstock-manager"]=this["webpackJsonpstock-manager"]||[]).push([[0],{123:function(e,t,n){},127:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(14),o=n.n(i),r=n(29),s=(n(123),n(95)),l=n(17),d=n(57);n(135),n(125);d.a.initializeApp({apiKey:"AIzaSyDrC-Fz80eWezeDNlscZ_gB9QooILNuJ6k",authDomain:"kistone-stock.firebaseapp.com",projectId:"kistone-stock",storageBucket:"kistone-stock.appspot.com",messagingSenderId:"602515706055",appId:"1:602515706055:web:271be76a0fdc249f6eeee2",measurementId:"G-1CFXPBLJZE"});d.a.auth.Auth.Persistence.LOCAL;var u={google:{get:new d.a.auth.GoogleAuthProvider,id:"google.com"}},b=d.a.auth(),j=d.a.firestore(),h=(n(127),n(5));var g=function(e){var t=e.type,n={google:{background:"#ffffff",color:"#757575",title:"Sign in with Google",titleShort:"Google",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"},github:{background:"#333333",title:"Sign in with GitHub",titleShort:"GitHub",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg"},facebook:{background:"#3b5998",title:"Sign in with Facebook",titleShort:"Facebook",icon:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg"}}[t],a=u[t];return Object(h.jsx)("div",{className:"signinButton",children:Object(h.jsxs)("button",{className:"firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised firebaseui-id-idp-button","data-provider-id":a.id,style:{backgroundColor:n.background},"data-upgraded":",MaterialButton",onClick:function(){b.signInWithRedirect(a.get).then((function(e){})).catch((function(e){alert(e)}))},children:[Object(h.jsx)("span",{className:"firebaseui-idp-icon-wrapper",children:Object(h.jsx)("img",{className:"firebaseui-idp-icon",alt:"",src:n.icon})}),Object(h.jsx)("span",{className:"firebaseui-idp-text firebaseui-idp-text-long",style:{color:n.color},children:n.title})]})})},p=n(60),m=n(82),f=Object(m.b)({name:"ReduxStore",initialState:{authenticate:{user:void 0,isAuth:!1}},reducers:{login:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{authenticate:t.payload})},logout:function(e,t){return Object(p.a)(Object(p.a)({},e),{},{authenticate:{user:void 0,isAuth:!1}})}}}),O=Object(m.a)({reducer:f.reducer}),x=f.actions,y=x.login,v=x.logout,k=O;n(129);var N=Object(r.b)(null,(function(e){return{doLogin:function(t){return e(y({user:t,isAuth:!0}))}}}))((function(e){var t=e.history,n=e.doLogin;return console.log("Login START"),Object(a.useEffect)((function(){return b.onAuthStateChanged((function(e){console.log("Login onAuthStateChanged",e),e&&(console.log("Login goMain!!"),n(e.email),t.push("/main"))}))}),[t,n]),Object(h.jsxs)("div",{className:"login_main",children:[Object(h.jsx)("div",{className:"title",children:"Stock Manager"}),Object(h.jsx)("div",{className:"button",children:Object(h.jsx)(g,{type:"google"})}),Object(h.jsx)("div",{className:"guest_button",onClick:function(){b.signInWithEmailAndPassword("guest@guest.com","password")},children:"Guest Login"})]})})),S=n(27);n(130),n(131);var w=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.trading,n=e.store,c=e.handleItemSelect,i=Object(a.useState)([]),o=Object(S.a)(i,2),r=o[0],s=o[1],l=t.key,d=t.data,u=d.color,b=d.display,g=n.authenticate,p=function(e){c({target:e.currentTarget,tradingKey:l}),e.stopPropagation()};return Object(a.useEffect)((function(){return j.collection("user").doc(g.user).collection("trading").doc(l).collection("items").orderBy("indate","desc").onSnapshot((function(e){e.size>0?s(e.docs.map((function(e){return e.data()}))):j.collection("user").doc(g.user).collection("trading").doc(l).delete()}))}),[g,l]),Object(h.jsxs)("div",{className:"stocktable",children:[Object(h.jsx)("div",{className:"table_title",style:{color:u},children:Object(h.jsx)("strong",{children:b})}),Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{className:"stock_name",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)("th",{className:"stock_price",children:"\ub2e8\uac00"}),Object(h.jsx)("th",{className:"stock_quantity",children:"\uc218\ub7c9"}),Object(h.jsx)("th",{className:"stock_indate",children:"\uc0c1\uc7a5\uc77c"})]})}),Object(h.jsx)("tbody",{children:r.map((function(e){var t=function(e){var t=new Date(e.indate);t.setHours(9,0,0,0);var n=((new Date).getTime()-t.getTime())/864e5,a={color:"dimgray"},c=0;return n>=0&&n<1?(a={color:"chartreuse"},c=1):n>=-2&&n<0?(a={color:"red"},c=2):n<-2&&(a={color:"darkgreen"}),{ddayState:c,changeStyle:a,displayDate:t.getMonth()+1+"/"+t.getDate()}}(e),n=t.ddayState,a=t.changeStyle,c=t.displayDate;return Object(h.jsxs)("tr",{onClick:p,children:[Object(h.jsx)("td",{className:"item_name",children:e.name}),Object(h.jsx)("td",{className:"item_price",children:String(e.price).replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Object(h.jsx)("td",{className:"item_quantity",children:e.quantity}),Object(h.jsxs)("td",{className:"item_date",style:a,originaldate:new Date(e.indate),children:[Object(h.jsx)("span",{className:"main_text",children:c}),n>0&&Object(h.jsx)("span",{className:"sub_text",children:1===n?"\uc785\uace0":"\uc785\uace0\uc608\uc815"})]})]},e.name)}))})]})]})})),C=n(96),I=n(162),E=n(165),A=n(176),D=n(174),_=n(179),B=n(178),T=n(170),L=n(171),M=n(22),R=n(173),F=[{key:"namuh",display:"\ub098\ubb34(NAMUH)",priority:0,color:"#00a383"},{key:"hankook",display:"\ud55c\uad6d\ud22c\uc790",priority:1,color:"#104e81"},{key:"mirae",display:"\ubbf8\ub798\uc5d0\uc14b",priority:2,color:"#e97f20"},{key:"kb",display:"KB\uc99d\uad8c",priority:3,color:"#f2b200"},{key:"shinhan",display:"\uc2e0\ud55c\uc54c\ud30c",priority:4,color:"#2e62da"},{key:"samsung",display:"\uc0bc\uc131\uc99d\uad8c",priority:5,color:"#14279b"}],z=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,2,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)"},selectEmpty:{marginTop:e.spacing(1),marginBottom:e.spacing(3)},formTrading:{minWidth:120},formInput:{width:"100%",marginBottom:"10px"}}}));var P=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,n=e.store,c=e.selectedItem,i=e.handleItemSelect,o=0,r="",s="",l="",d=new Date;c&&(F.forEach((function(e,t){e.key===c.tradingKey&&(o=t)})),r=c.target.children[0].textContent,s=c.target.children[1].textContent.replace(",",""),l=c.target.children[2].textContent,d=new Date(c.target.children[3].getAttribute("originaldate")));var u=z(),b=Object(a.useState)(o),g=Object(S.a)(b,2),p=g[0],m=g[1],f=Object(a.useState)(r),O=Object(S.a)(f,2),x=O[0],y=O[1],v=Object(a.useState)(s),k=Object(S.a)(v,2),N=k[0],w=k[1],I=Object(a.useState)(l),P=Object(S.a)(I,2),q=P[0],G=P[1],K=Object(a.useState)(d),W=Object(S.a)(K,2),H=W[0],J=W[1],Q=n.authenticate,Z=null!==c;return Object(h.jsx)("div",{className:u.paper,children:Object(h.jsxs)("form",{children:[Object(h.jsxs)(E.a,{className:u.formTrading,children:[Object(h.jsx)(A.a,{id:"trading-select-label",children:"\uc99d\uad8c\uacc4\uc88c"}),Object(h.jsx)(D.a,{labelId:"trading-select-label",id:"trading-select",value:p,onChange:function(e){m(e.target.value)},className:u.selectEmpty,required:!0,disabled:Z,children:F.map((function(e,t){return Object(h.jsx)(_.a,{value:t,children:e.display},e.key)}))})]}),Object(h.jsxs)(E.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"name-input",children:"\uc885\ubaa9\uba85"}),Object(h.jsx)(B.a,{id:"name-input",value:x,onChange:function(e){y(e.target.value)},label:"Name",required:!0,disabled:Z})]}),Object(h.jsxs)(E.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"price-input",children:"\ub2e8\uac00"}),Object(h.jsx)(B.a,{id:"price-input",value:N,onChange:function(e){w(e.target.value)},label:"Price",type:"number"})]}),Object(h.jsxs)(E.a,{variant:"outlined",className:u.formInput,children:[Object(h.jsx)(A.a,{htmlFor:"quantity-input",children:"\uc218\ub7c9"}),Object(h.jsx)(B.a,{id:"quantity-input",value:q,onChange:function(e){G(e.target.value)},label:"Quantity",type:"number"})]}),Object(h.jsx)(M.a,{utils:C.a,children:Object(h.jsx)(R.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Month/Day/Year",value:H,onChange:function(e){J(e)},KeyboardButtonProps:{"aria-label":"change date"},PopoverProps:{anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"}},className:u.formInput})}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(L.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(L.a,{color:"primary",onClick:function(e){if(e.preventDefault(),"guest@guest.com"===Q.user)return alert("please sign-in with private account"),t(!1),void i(null);var n=F[p],a=j.collection("user").doc(Q.user).collection("trading");a.doc(n.key).set({display:n.display,priority:n.priority,color:n.color}),a.doc(n.key).collection("items").doc(x).set({name:x,price:N,quantity:q,indate:H.valueOf()}).then((function(){})).catch((function(e){console.error("Error adding document: ",e)})),t(!1),i(null)},type:"submit",autoFocus:!0,children:c?"\uc218\uc815":"\ucd94\uac00"})]})]})})})),q=n(172),G=n(175),K=n(91),W=n.n(K),H=n(92),J=n.n(H),Q=n(93),Z=n.n(Q),U=n(94),X=n.n(U),Y=n(73),V=Object(I.a)((function(e){return{paper:{boxSizing:"border-box",position:"absolute",width:"80%",maxWidth:"600px",backgroundColor:e.palette.background.paper,borderRadius:"10px",boxShadow:e.shadows[5],padding:e.spacing(2,3,1),top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"black"}}}));var $=Object(r.b)((function(e){return{store:e}}),null)((function(e){var t=e.setOpen,n=e.store,a=e.selectedItem,c=e.handleItemSelect;a||t(!1);var i=null===a||void 0===a?void 0:a.target.children[0].innerText,o=V(),r=n.authenticate;return Object(h.jsxs)("div",{className:o.paper,children:[Object(h.jsx)("h3",{id:"simple-modal-title",children:"\uc0ad\uc81c"}),Object(h.jsx)("div",{style:{marginBottom:"20px"},children:"\uc0ad\uc81c \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(h.jsxs)(T.a,{children:[Object(h.jsx)(L.a,{color:"primary",onClick:function(){return t(!1)},children:"\ucde8\uc18c"}),Object(h.jsx)(L.a,{color:"primary",onClick:function(){if("guest@guest.com"===r.user)return alert("please sign-in with private account"),t(!1),void c(null);j.collection("user").doc(r.user).collection("trading").doc(a.tradingKey).collection("items").doc(i).delete().then((function(){})).catch((function(e){console.error("Error removing document: ",e)})),t(!1),c(null)},type:"submit",autoFocus:!0,children:"\uc0ad\uc81c"})]})]})})),ee=Object(I.a)((function(e){return{fab:{},fabEdit:{color:e.palette.common.white,backgroundColor:Y.a[500],"&:hover":{backgroundColor:Y.a[600]}}}}));var te=Object(r.b)((function(e){return{store:e}}),(function(e){return{doLogout:function(){return e(v())}}}))((function(e){var t=e.history,n=e.store,c=e.doLogout,i=n.authenticate,o=ee(),r=Object(a.useState)(!1),s=Object(S.a)(r,2),l=s[0],d=s[1],u=Object(a.useState)(!1),g=Object(S.a)(u,2),p=g[0],m=g[1],f=Object(a.useState)([]),O=Object(S.a)(f,2),x=O[0],y=O[1],v=Object(a.useState)(null),k=Object(S.a)(v,2),N=k[0],C=k[1];console.log("Main START",i),i.isAuth||(console.log("Main goRoot!!"),t.replace("/")),Object(a.useEffect)((function(){return console.log("Main RENDERED"),function(){}}),[]),Object(a.useEffect)((function(){return console.log("Main useEffect(authenticate)"),j.collection("user").doc(null===i||void 0===i?void 0:i.user).collection("trading").orderBy("priority","asc").onSnapshot((function(e){y(e.docs.map((function(e){return{key:e.id,data:e.data()}})))}))}),[i]);var I=function(){d(!0)},E=function(e){null===N||void 0===N||N.target.removeAttribute("class"),null===e||void 0===e||e.target.setAttribute("class","selected"),C(e)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("header",{children:Object(h.jsxs)("div",{className:"header_main",children:[Object(h.jsx)("span",{className:"username",children:i.user}),Object(h.jsxs)("div",{className:"logout",onClick:function(){b.signOut().then((function(){c(!1)}))},children:[Object(h.jsx)("span",{children:"Logout"}),Object(h.jsx)(W.a,{})]})]})}),Object(h.jsx)("div",{className:"main",onClick:function(){E(null)},children:x.map((function(e){return Object(h.jsx)(w,{trading:e,handleItemSelect:E},e.key)}))}),Object(h.jsx)("div",{className:N?"fab-area unselect fadeout":"fab-area unselect fadein",children:Object(h.jsx)(q.a,{className:o.fab,color:"primary","aria-label":"add",onClick:I,children:Object(h.jsx)(J.a,{})})}),Object(h.jsxs)("div",{className:N?"fab-area select slidein":"fab-area select slideout",children:[Object(h.jsx)(q.a,{className:o.fabEdit,color:"secondary","aria-label":"edit",onClick:I,children:Object(h.jsx)(Z.a,{})}),Object(h.jsx)(q.a,{className:o.fab,color:"secondary","aria-label":"delete",onClick:function(){m(!0)},children:Object(h.jsx)(X.a,{})})]}),Object(h.jsx)(G.a,{open:l,onClose:function(){d(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)(P,{setOpen:d,selectedItem:N,handleItemSelect:E})})}),Object(h.jsx)(G.a,{open:p,onClose:function(){m(!1)},"aria-labelledby":"add-stock","aria-describedby":"add-stock",children:Object(h.jsx)("div",{children:Object(h.jsx)($,{setOpen:m,selectedItem:N,handleItemSelect:E})})})]})}));var ne=function(){return console.log("App START"),Object(a.useEffect)((function(){return console.log("App RENDERED"),function(){}}),[]),Object(h.jsx)(s.a,{children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(l.b,{exact:!0,path:"/",render:function(){return Object(h.jsx)(l.a,{to:"/login"})}}),Object(h.jsx)(l.b,{exact:!0,path:"/login",component:N}),Object(h.jsx)(l.b,{exact:!0,path:"/main",component:te})]})})};o.a.render(Object(h.jsx)(r.a,{store:k,children:Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(ne,{})})}),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.16043a0c.chunk.js.map